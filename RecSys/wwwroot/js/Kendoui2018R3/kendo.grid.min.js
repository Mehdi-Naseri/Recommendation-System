/** 
 * Kendo UI v2018.3.911 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2018 Telerik EAD. All rights reserved.                                                                                                                                                     
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("util/text-metrics.min",["kendo.core.min"],e)}(function(){!function(e){function t(e){return(e+"").replace(i,s)}function r(e){var t,r=[];for(t in e)r.push(t+e[t]);return r.sort().join("")}function l(e){var t,r=2166136261;for(t=0;t<e.length;++t)r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24),r^=e.charCodeAt(t);return r>>>0}function o(){return{width:0,height:0,baseline:0}}function a(e,t,r){return u.current.measure(e,t,r)}var n,i,s,d,c,u;window.kendo.util=window.kendo.util||{},n=kendo.Class.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var r=this._map,l={key:e,value:t};r[e]=l,this._head?(this._tail.newer=l,l.older=this._tail,this._tail=l):this._head=this._tail=l,this._length>=this._size?(r[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),i=/\r?\n|\r|\t/g,s=" ",d={baselineMarkerSize:1},"undefined"!=typeof document&&(c=document.createElement("div"),c.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;"),u=kendo.Class.extend({init:function(t){this._cache=new n(1e3),this.options=e.extend({},d,t)},measure:function(e,a,n){var i,s,d,u,p,h,f,g,m;if(void 0===n&&(n={}),!e)return o();if(i=r(a),s=l(e+i),d=this._cache.get(s))return d;u=o(),p=n.box||c,h=this._baselineMarker().cloneNode(!1);for(f in a)g=a[f],void 0!==g&&(p.style[f]=g);return m=n.normalizeText!==!1?t(e):e+"",p.textContent=m,p.appendChild(h),document.body.appendChild(p),m.length&&(u.width=p.offsetWidth-this.options.baselineMarkerSize,u.height=p.offsetHeight,u.baseline=h.offsetTop+this.options.baselineMarkerSize),u.width>0&&u.height>0&&this._cache.put(s,u),p.parentNode.removeChild(p),u},_baselineMarker:function(){var e=document.createElement("div");return e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",e}}),u.current=new u,kendo.deepExtend(kendo.util,{LRUCache:n,TextMetrics:u,measureText:a,objectKey:r,hashKey:l,normalizeText:t})}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()}),function(e,define){define("kendo.grid.min",["kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.filtermenu.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.mobile.actionsheet.min","kendo.mobile.pane.min","kendo.ooxml.min","kendo.excel.min","kendo.progressbar.min","kendo.pdf.min"],e)}(function(){return function(e,t){function r(e,t){return"["+Se.attr(e)+"="+t+"]"}function l(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function o(e){var t,r=" ";if(e){if(typeof e===Gt)return e;for(t in e)""!==e[t]&&(r+=t+'="'+e[t]+'"')}return r}function a(t,r){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",r)}function n(t,r,l,o,a){var n,i=r;for(r=e(),a=a||1,n=0;n<a;n++)r=r.add(t.eq(i+n));"number"==typeof l?r[o?"insertBefore":"insertAfter"](t.eq(l)):r.appendTo(l)}function i(t,r,l){return e(t).add(r).find(l)}function s(e,t,r){var l,o,a,n;for(r=qe(r)?r:[r],l=0,o=r.length;l<o;l++)a=r[l],De(a)&&a.click&&(n=a.name||a.text,t.on(Vt+lt,"a.k-grid-"+(n||"").replace(/\s/g,""),{commandName:n},Be(a.click,e)))}function d(e,t,r){return Ae(e,function(e){var l,o;return e=typeof e===Gt?{field:e}:e,_(e)&&!r||(e.attributes=X(e.attributes),e.footerAttributes=X(e.footerAttributes),e.headerAttributes=X(e.headerAttributes),l=!0),e.columns&&(e.columns=d(e.columns,t,l)),o=Se.guid(),e.headerAttributes=Fe({id:o},e.headerAttributes),Fe({encoded:t,hidden:l},e)})}function c(e,t){var r=[];return u(e,t,r),r[r.length-1]}function u(e,t,r){var l,o;for(r=r||[],l=0;l<t.length;l++){if(e===t[l])return!0;if(t[l].columns){if(o=r.length,r.push(t[l]),u(e,t[l].columns,r))return!0;r.splice(o,r.length-o)}}return!1}function p(e,t){h(e,t,t)}function h(e,t,r){var l=r?Z:X;e.hidden=!t,e.attributes=l(e.attributes),e.footerAttributes=l(e.footerAttributes),e.headerAttributes=l(e.headerAttributes)}function f(e,t){g(e);var r=e._hideByMedia;h(e,t,r?e.matchesMedia:t)}function g(e){e.matchesMedia=m(e)}function m(e){return e&&(C(e.media)||!C(e.media)&&Se.matchesMedia(e.media))}function b(){return"none"!==this.style.display}function k(t){return"none"!==e(t)[0].style.display}function _(e){return v([e]).length>0}function v(e){return We(e,function(e){var t=!e.hidden&&e.matchesMedia!==!1;return t&&e.columns&&(t=v(e.columns).length>0),t})}function w(e){var t,r,l=[];for(r=0;r<e.length;r++){if(t=e[r],!C(t.media)){if(!C(t.minScreenWidth))throw Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");l.push(t)}t.columns&&(l=l.concat(w(t.columns)))}return l}function C(e){return t===e}function y(t){return e(t).map(function(){return this.toArray()})}function S(e,t,r){var l=H(N(t)),o=H(O(t)),a=e.rowSpan;e.rowSpan=r?l>o?a-(l-o)||1:a+(o-l):l>o?a+(l-o):a-(o-l)||1}function T(t,r,l,o,a,n,i){var s,d,c=H(t),u=H([r]);c>u&&(s=Array(i+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),d=n.children(":not(.k-filter-row)"),e(Array(c-u+1).join("<tr>"+s+"</tr>")).insertAfter(d.last())),P(n,c-u),R(l,o,a,n)}function x(t,r,l){var o,a,n,i,s,d,c,u;for(l=l||0,n=r,r=U(r),i={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=r.length;c<u;c++)o=I(r[c],n),i[o.row]||(i[o.row]=s.eq(o.row).find(".k-header").filter(d)),a=i[o.row].eq(o.cell),a.attr(Se.attr("index"),l+c);return r.length}function H(e){var t,r,l=1,o=0;for(t=0;t<e.length;t++)e[t].columns&&(r=H(e[t].columns),r>o&&(o=r));return l+o}function R(t,r,l,o){var a,n,i=M(t[0],r),s=l.find(">tr:not(.k-filter-row):eq("+i.row+")>th.k-header"),d=e(),c=i.cell;for(a=0;a<t.length;a++)d=d.add(s.eq(c+a));for(o.find(">tr:not(.k-filter-row)").eq(i.row).append(d),n=[],a=0;a<t.length;a++)t[a].columns&&(n=n.concat(t[a].columns));n.length&&R(n,r,l,o)}function I(e,t,r,l){var o,a;for(r=r||0,l=l||{},l[r]=l[r]||0,a=0;a<t.length;a++){if(t[a]==e){o={cell:l[r],row:r};break}if(t[a].columns&&(o=I(e,t[a].columns,r+1,l)))break;l[r]++}return o}function z(e,t,r,l){var o,a,n=!!r.locked;do o=e[t],t+=l?1:-1,a=!!o.locked;while(o&&t>-1&&t<e.length&&o!=r&&!o.columns&&a===n);return o}function E(e,t,r,l,o){var a,n,i,s,d;return t.columns?(t=t.columns,t[l?0:t.length-1]):(a=c(t,e),n=a?a.columns:e,i=Pe(t,n),0===i&&l?i++:i!=n.length-1||l?(i>0||0===i&&!l)&&(i+=l?-1:1):i--,s=Pe(r,n),t=z(n,i,r,s>i),d=Pe(t,o),(!t.columns||d&&d!==n.length-1)&&t&&t!=r&&t.columns?E(e,t,r,l,o):null)}function M(e,t,r,l){var o,a;for(r=r||0,l=l||{},l[r]=l[r]||0,a=0;a<t.length;a++){if(t[a]==e){o={cell:l[r],row:r};break}if(t[a].columns&&(o=M(e,t[a].columns,r+1,l)))break;t[a].hidden||l[r]++}return o}function L(e){var t=F(N(e));return t.concat(F(O(e)))}function D(e,t,r,l){var o=e[r],a=e[l],n=c(o,t);return t=n?n.columns:t,Pe(a,t)}function F(e){var t,r=[],l=[];for(t=0;t<e.length;t++)r.push(e[t]),e[t].columns&&(l=l.concat(e[t].columns));return l.length&&(r=r.concat(F(l))),r}function A(e){var t,r,l=0;for(r=0;r<e.length;r++)t=e[r],t.columns?l+=A(t.columns):t.hidden&&l++;return l}function W(e){var t,r,l,o=0;for(r=0,l=e.length;r<l;r++)t=e[r].style.width,t&&t.indexOf("%")==-1&&(o+=parseInt(t,10));return o}function q(e,t){var r,l,o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(l=0;l<o.length;l++)r=o[l].rowSpan,r>1&&(o[l].rowSpan=r-t||1)}function P(e,t){var r,l=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<l.length;r++)l[r].rowSpan+=t}function V(t){var r,l=t.find("tr:not(.k-filter-row)"),o=l.filter(function(){return!e(this).children().length}).remove().length,a=l.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<a.length;r++)a[r].rowSpan>1&&(a[r].rowSpan-=o);return l.length-o}function B(e,t,r,l,o){var a,n,i,s=[];for(a=0,i=e.length;a<i;a++)n=r[l]||[],n.push(t.eq(o+a)),r[l]=n,e[a].columns&&(s=s.concat(e[a].columns));s.length&&B(s,t,r,l+1,o+e.length)}function N(e){return We(e,function(e){return e.locked})}function O(e){return We(e,function(e){return!e.locked})}function G(e){return We(e,function(e){return!e.locked&&_(e)})}function K(e){return We(e,function(e){return e.locked&&_(e)})}function j(e){var t,r=[];for(t=0;t<e.length;t++)e[t].hidden||(e[t].columns?r=r.concat(j(e[t].columns)):r.push(e[t]));return r}function U(e){var t,r=[];for(t=0;t<e.length;t++)e[t].columns?r=r.concat(U(e[t].columns)):r.push(e[t]);return r}function $(r){var l,o=r.find(">tr:not(.k-filter-row)"),a=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},n=e();return o.length>1&&(n=o.find("th").filter(a).filter(function(){return this.rowSpan>1})),n=n.add(o.last().find("th").filter(a)),l=Se.attr("index"),n.sort(function(r,o){var a,n;return r=e(r),o=e(o),a=r.attr(l),n=o.attr(l),a===t&&(a=e(r).index()),n===t&&(n=e(o).index()),a=parseInt(a,10),n=parseInt(n,10),a>n?1:a<n?-1:0}),n}function Q(t){var r,l,o,a,n,i,s,d=t.closest("table"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u);if(h>0){for(r=p.eq(h-1),l=r.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),o=0,a=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),n=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),i=0;i<n.length;i++)o+=n[i].colSpan||1;for(a+=Math.max(o-1,0),o=0,i=0;i<l.length;i++)if(s=l.eq(i),o+=s.attr("data-colspan")?s[0].getAttribute("data-colspan"):1,a>=i&&a<o){c=Q(s).add(c);break}}return c}function J(t){var r,l,o,a,n,i,s,d=t.closest("thead"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u)+t[0].rowSpan,f=Se.attr("colspan");if(h<=p.length-1){for(r=u.next(),l=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),l=l.filter(function(){return!this.rowSpan||1===this.rowSpan}),a=0,o=0;o<l.length;o++)a+=parseInt(l.eq(o).attr(f),10)||1;for(n=r.find("th:not(.k-group-cell,.k-hierarchy-cell)"),i=parseInt(t.attr(f),10)||1,o=0;o<i;)r=n.eq(o+a),c=c.add(J(r)),s=parseInt(r.attr(f),10),s>1&&(i-=s-1),o++}return c}function Y(t,r,l,o){var a,n=t;return o&&t.empty(),Re?t[0].innerHTML=l:(a=document.createElement("div"),a.innerHTML="<table><tbody>"+l+"</tbody></table>",t=a.firstChild.firstChild,r[0].replaceChild(t,n[0]),t=e(t)),t}function X(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",Fe({},e,{style:t})}function Z(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function ee(t,r,l,o){var a,n=t.find(">colgroup"),i=Ae(r,function(e){return a=e.width,a&&0!==parseInt(a,10)?Se.format('<col style="width:{0}"/>',typeof a===Gt?a:a+"px"):"<col />"});(l||n.find(".k-hierarchy-col").length)&&i.splice(0,0,'<col class="k-hierarchy-col" />'),n.length&&n.remove(),n=e(Array(o+1).join('<col class="k-group-col">')+i.join("")),n.is("colgroup")||(n=e("<colgroup/>").append(n)),t.prepend(n),gr.msie&&8==gr.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function te(e,t){var r,l,o=0,a=e.find("th:not(.k-group-cell)");for(r=0,l=t.length;r<l;r++)t[r].locked&&(a.eq(r).insertBefore(a.eq(o)),a=e.find("th:not(.k-group-cell)"),o++)}function re(e){var t,r,l,o={};for(r=0,l=e.length;r<l;r++)t=e[r],o[t.value]=t.text;return o}function le(e,t,r,l){var o=r&&r.length&&De(r[0])&&"value"in r[0],a=o?re(r)[e]:e;return a=null!=a?a:"",t?Se.format(t,a):l===!1?a:Se.htmlEncode(a)}function oe(e,t,r){for(var l,o=0,a=e[o];a;){if(l=!!r||"none"!==a.style.display,l&&!dr.test(a.className)&&--t<0){a.style.display=r?"":"none";break}a=e[++o]}}function ae(t,r){for(var l,o,a=0,n=t.length;a<n;a+=1)o=t.eq(a),o.is(".k-grouping-row,.k-detail-row")?(l=o.children(":not(.k-group-cell):first,.k-detail-cell").last(),l.attr("colspan",parseInt(l.attr("colspan"),10)-1)):(o.hasClass("k-grid-edit-row")&&(l=o.children(".k-edit-container")[0])&&(l=e(l),l.attr("colspan",parseInt(l.attr("colspan"),10)-1),l.find("col").eq(r).remove(),o=l.find("tr:first")),oe(o[0].cells,r,!1))}function ne(e){var t,r,l=[];for(r=0;r<e.length&&(t=e[r],"field"in t&&"value"in t&&"items"in t);r++)l.push(t),t.hasSubgroups&&(l=l.concat(ne(t.items)));return l}function ie(e){var t,r,l=[];for(r=0;r<e.length&&(t=e[r],"field"in t&&"value"in t&&"items"in t);r++)t.hasSubgroups&&(l=l.concat(ie(t.items))),l.push(t.aggregates);return l}function se(t,r){for(var l,o,a,n=0,i=t.length;n<i;n+=1)o=t.eq(n),o.is(".k-grouping-row,.k-detail-row")?(l=o.children(":not(.k-group-cell):first,.k-detail-cell").last(),l.attr("colspan",parseInt(l.attr("colspan"),10)+1)):(o.hasClass("k-grid-edit-row")&&(l=o.children(".k-edit-container")[0])&&(l=e(l),l.attr("colspan",parseInt(l.attr("colspan"),10)+1),ee(l.find(">form>table"),v(a),!1,0),o=l.find("tr:first")),oe(o[0].cells,r,!0))}function de(e,t,r){r=r||1;var l,o,a;for(o=0,a=e.length;o<a;o++)l=e.eq(o).children().last(),l.attr("colspan",parseInt(l.attr("colspan"),10)+r),l=t.eq(o).children().last(),l.attr("colspan",parseInt(l.attr("colspan"),10)-r)}function ce(e){var t,r,l=0,o=e.find(">colgroup>col");for(t=0,r=o.length;t<r;t+=1)l+=parseInt(o[t].style.width,10);return l}function ue(e,t){var r,l,o,a;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(r=e.offsetHeight,l=t.offsetHeight,r>l?(o=t.rows[t.rows.length-1],cr.test(o.className)&&(o=t.rows[t.rows.length-2]),a=r-l):(o=e.rows[e.rows.length-1],cr.test(o.className)&&(o=e.rows[e.rows.length-2]),a=l-r),o.style.height=o.offsetHeight+a+"px")}function pe(e,t){var r,l=e.offsetHeight,o=t.offsetHeight;l>o?r=l+"px":l<o&&(r=o+"px"),r&&(e.style.height=t.style.height=r)}function he(e,t){var r,l,o;if(typeof e===Gt&&e===t)return e;if(De(e)&&e.name===t)return e;if(qe(e))for(r=0,l=e.length;r<l;r++)if(o=e[r],typeof o===Gt&&o===t||o.name===t)return o;return null}function fe(t,r){if(r===!0){t=e(t);var l=t.parent().scrollLeft();Se.focusElement(t),t.parent().scrollLeft(l)}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function ge(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function me(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}function be(r){var l=e(r.currentTarget),o=l.is("th"),a=this.table.add(this.lockedTable),n=this.thead.parent().add(e(">table",this.lockedHeader)),i=me(r.target),s=e(r.target),d=l.closest("table")[0];return i&&l.find(Se.roleSelector("filtercell")).length?(this._setCurrent(l),t):(d!==a[0]&&d!==a[1]&&d!==n[0]&&d!==n[1]||s.is("a.k-i-expand, a.k-i-collapse")||(this.options.navigatable&&this._setCurrent(l),!o&&i||setTimeout(function(){br&&e(Se._activeElement()).hasClass("k-widget")||me(Se._activeElement())&&e.contains(d,Se._activeElement())||fe(d,!0)}),o&&r.preventDefault()),t)}function ke(e,t){if(!t)return 0;var r=0;return Se.support.browser.webkit&&(r=e.width()),r}function _e(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function ve(e){return'<td colspan="#=data.colspan +'+e+'#"><p class="k-reset"><a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+ar+'="'+lr+'"></a>#=data.text#</p></td>'}function we(e){return'<td colspan="'+e+'"><p class="k-reset">&nbsp;</p></td>'}function Ce(e,t,r){return'<tr role="row" class="k-grouping-row">'+l(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1" '+ar+'="'+lr+'"></a>'+r+"</p></td></tr>"}function ye(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var Se=window.kendo,Te=Se.ui,xe=Se.data.DataSource,He=Se.data.ObservableObject,Re=Se.support.tbodyInnerHtml,Ie=Se._activeElement,ze=Te.Widget,Ee=Se._outerWidth,Me=Se._outerHeight,Le=Se.keys,De=e.isPlainObject,Fe=e.extend,Ae=e.map,We=e.grep,qe=e.isArray,Pe=e.inArray,Ve=Array.prototype.push,Be=e.proxy,Ne=Se.isFunction,Oe=e.isEmptyObject,Ge=e.contains,Ke=Math,je="progress",Ue="error",$e=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Qe="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",Je="tr:not(.k-footer-template):visible",Ye=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Xe="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",Ze=Xe+":first",et=Xe+":last",tt=Je+":first>"+Ye+":first",rt="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",lt=".kendoGrid",ot="k-grid-content-locked",at="k-group-cell",nt="edit",it="beforeEdit",st="save",dt="remove",ct="detailInit",ut="filterMenuInit",pt="columnMenuInit",ht="filterMenuOpen",ft="columnMenuOpen",gt="cellClose",mt="change",bt="columnHide",kt="columnShow",_t="saveChanges",vt="dataBound",wt="detailExpand",Ct="detailCollapse",yt="itemchange",St="page",Tt="paging",xt="scroll",Ht="sync",Rt="k-state-focused",It=":kendoFocusable",zt="k-state-selected",Et="k-checkbox",Mt="input[data-role='checkbox']."+Et,Lt="k-grid-norecords",Dt="resize",Ft="columnResize",At="columnReorder",Wt="columnLock",qt="columnUnlock",Pt="navigate",Vt="click",Bt="height",Nt="tabIndex",Ot="function",Gt="string",Kt="bottom",jt="container-for",Ut="field",$t="input",Qt="incell",Jt="inline",Yt="uid",Xt=1,Zt="Are you sure you want to delete this record?",er="No records available.",tr="Delete",rr="Cancel",lr="Collapse",or="Expand",ar="aria-label",nr=/(\}|\#)/gi,ir=/#/gi,sr="[\\x20\\t\\r\\n\\f]",dr=RegExp("(^|"+sr+")(k-group-cell|k-hierarchy-cell)("+sr+"|$)"),cr=RegExp("(^|"+sr+")(k-filter-row)("+sr+"|$)"),ur='# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',pr='# var checkboxGuid = kendo.guid(); #<input class="'+Et+'" data-role="checkbox" id="#= checkboxGuid #" aria-label="Select row" aria-checked="false" type="checkbox"><label for="#= checkboxGuid #" class="k-checkbox-label k-no-text">&\\#8203;</label>',hr='# var checkboxGuid = kendo.guid(); #<input class="'+Et+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox" id="#= checkboxGuid #"><label for="#= checkboxGuid #" class="k-checkbox-label k-no-text">##&\\#8203;##</label>',fr=!1,gr=Se.support.browser,mr=gr.msie&&7==gr.version,br=gr.msie&&8==gr.version,kr=gr.msie&&11===gr.version,_r=ze.extend({init:function(e,t){var r=this;ze.fn.init.call(r,e,t),r._refreshHandler=Be(r.refresh,r),r.setDataSource(t.dataSource),r.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(mt,t._refreshHandler),t.dataSource=e,t.dataSource.bind(mt,t._refreshHandler),t.dataSource.options.useRanges=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[Tt,St,xt],destroy:function(){var e=this;ze.fn.destroy.call(e),e.dataSource.unbind(mt,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(lt),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,l=Se.support.scrollbar()+1,o=r.element;o.css({width:"auto",overflow:"hidden"}).css(fr?"padding-left":"padding-right",l),r.content=o.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+lt+" mousewheel"+lt,Be(r._wheelScroll,r)),r._wrapper(),Se.support.kineticScrollNeeded&&(r.drag=new Se.UserEvents(r.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:l}).appendTo(o).bind("scroll"+lt,Be(r._scroll,r))},_wrapper:function(){var e=this;kr&&(e.wrapper.css({"overflow-y":xt}),e.element.css(fr?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),l=Se.wheelDeltaY(e);!l||l>0&&0===r||l<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-l))}},_scroll:function(e){var r=this,l=!r.options.prefetch,o=e.currentTarget.scrollTop,a=r.dataSource,n=r.itemHeight,i=a.skip()||0,s=r._rangeStart||i,d=r.element.innerHeight(),c=!!(r._scrollbarTop&&r._scrollbarTop>o),u=Ke.max(Ke.floor(o/n),0),p=c?Ke.ceil(d/n):Ke.floor(d/n),h=Ke.max(u+p,0);return r._preventScroll?(r._preventScroll=!1,t):(r._scrollTop=o-s*n,r._scrollbarTop=o,r._scrolling=l,r._fetch(u,h,c)||(r.wrapper[0].scrollTop=r._scrollTop),r.trigger(xt),l&&(r._scrollingTimeout&&clearTimeout(r._scrollingTimeout),r._scrollingTimeout=setTimeout(function(){r._scrolling=!1,r._page(r._rangeStart,r.dataSource.take())},100)),t)},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?e._wrapperScrolled&&!e._isScrolledToBottom()||(t.scrollTop(r+Se.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(r-Se.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e){var t=this,r=t.verticalScrollbar;r.scrollTop()!==e&&(t._preventScroll=!0),t.wrapper.scrollTop(e),t._scrollTop=t.wrapper.scrollTop(),r.scrollTop(e),t._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},_isElementVisible:function(e){return this._isElementVisibleInWrapper(e)},_isElementVisibleInWrapper:function(t){var r,l,o=this,a=o.wrapper;return t=e(t),!!(t[0]&&Ge(a[0],t[0])&&(r=t.offset().top-a.offset().top,l=t.outerHeight()/2,(r>=0||Ke.abs(r)<=l)&&Ke.floor(r+l)<=a.height()))},position:function(e){var t,r=this._rangeStart||this.dataSource.skip()||0,l=this.dataSource.pageSize();return t=e>r?e-r+1:r-e-1,t>l?l:t},scrollIntoView:function(e){var t=this.wrapper[0],r=t.clientHeight,l=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,o=e[0].offsetTop,a=e[0].offsetHeight;l>o?this.verticalScrollbar[0].scrollTop-=r/2:o+a>=l+r&&(this.verticalScrollbar[0].scrollTop+=r/2)},_fetch:function(t,r,l){var o=this,a=o.dataSource,n=o.itemHeight,i=a.take(),s=o._rangeStart||a.skip()||0,d=Ke.floor(t/i)*i,c=!1,u=.33,p=o.verticalScrollbar,h=gr.webkit?1:0;return t<s?(c=!0,s=Ke.max(0,r-i),o._scrollTop=p.scrollTop()-s*n,o._page(s,i)):r>=s+i&&!l?(c=!0,s=Ke.min(t,a.total()-i),o._scrollTop=p.scrollTop()>=p[0].scrollHeight-p.height()-h?o.wrapper[0].scrollHeight-o.wrapper.height():n,o._page(s,i)):!o._fetching&&o.options.prefetch&&(t<d+i-i*u&&t>i&&a.prefetch(d-i,i,e.noop),r>d+i*u&&a.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,r,l){var o=this,a=!o.options.prefetch,n=o.dataSource;l=Ne(l)?l:e.noop,o.trigger(Tt,{skip:t,take:r})||(clearTimeout(o._timeout),o._fetching=!0,o._rangeStart=t,n.inRange(t,r)?(Se.ui.progress(e(o.wrapper).parent(),!0),n.range(t,r,function(){Se.ui.progress(e(o.wrapper).parent(),!1),l(),o.trigger(St)})):(a||Se.ui.progress(o.wrapper.parent(),!0),o._timeout=setTimeout(function(){o._scrolling||(a&&Se.ui.progress(o.wrapper.parent(),!0),n.range(t,r,function(){Se.ui.progress(o.wrapper.parent(),!1),l(),o.trigger(St)}))},100)))},repaintScrollbar:function(e){var r,l=this,o="",a=l.options.maxScrollHeight,n=l.dataSource,i=Se.support.kineticScrollNeeded?0:Se.support.scrollbar(),s=l.wrapper[0],d=l._isScrolledToBottom(),c=l.itemHeight=l.options.itemHeight()||0,u=s.scrollWidth>s.offsetWidth?i:0,p=n.total()*c+u;for(r=0;r<Ke.floor(p/a);r++)o+='<div style="width:1px;height:'+a+'px"></div>';p%a&&(o+='<div style="width:1px;height:'+p%a+'px"></div>'),l.verticalScrollbar.html(o),d&&!l._isScrolledToBottom()&&l.scrollToBottom(),t!==l._scrollTop&&e&&(s.scrollTop=l._scrollTop,l._scrollWrapperOnColumnResize())},refresh:function(e){var r=this,l=r.dataSource,o=r._rangeStart,a=(e||{}).action,n=r._isScrolledToBottom()||!a||a!==yt&&a!==dt&&a!==Ht;Se.ui.progress(r.wrapper.parent(),!1),clearTimeout(r._timeout),r.repaintScrollbar(n),r.drag&&r.drag.cancel(),t===o||r._fetching||((!a||a!==Ht&&a!==yt)&&(r._rangeStart=l.skip()),1!==l.page()||a&&(a===Ht||a===yt)||(r.verticalScrollbar[0].scrollTop=0)),r._fetching=!1}}),vr={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"}},wr=Se.ui.DataBoundWidget.extend({init:function(t,r,l){var o=this;r=qe(r)?{dataSource:r}:r,ze.fn.init.call(o,t,r),l&&(o._events=l),fr=Se.support.isRtl(t),o._element(),o._aria(),o._columns(e.extend(!0,[],o.options.columns)),o._dataSource(),o._tbody(),o._pageable(),o._thead(),o._groupable(),o._toolbar(),o._setContentHeight(),o._templates(),o._navigatable(),o._selectable(),o._clipboard(),o._details(),o._editable(),o._attachCustomCommandsEvent(),o._adaptiveColumns(),o._minScreenSupport(),o.options.autoBind?o.dataSource.fetch():(o._group=o._groups()>0,o._footer()),o.lockedContent&&(o.wrapper.addClass("k-grid-lockedcolumns"),o._resizeHandler=function(){o.resize()},e(window).on("resize"+lt,o._resizeHandler)),Se.notify(o)},events:[mt,"dataBinding","cancel",vt,wt,Ct,ct,ut,ht,pt,ft,nt,it,st,dt,_t,gt,Ft,At,kt,bt,Wt,qt,Pt,"page","sort","filter","group","groupExpand","groupCollapse"],setDataSource:function(e){var t,r=this,l=r.options.scrollable;r.options.dataSource=e,r._dataSource(),r._pageable(),r._thead(),l&&(l.virtual?(t=r.content.find(">.k-virtual-scrollable-wrap"),t.scrollLeft(ke(t,fr))):(t=r.tbody,r.content.scrollLeft(ke(t,fr)))),r.options.groupable&&r._groupable(),r.virtualScrollable&&r.virtualScrollable.setDataSource(r.options.dataSource),r.options.navigatable&&r._navigatable(),r.options.selectable&&r._selectable(),r.options.autoBind&&r.dataSource.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:rr,confirmation:Zt,confirmDelete:tr},commands:{create:vr.create.text,cancel:vr.cancel.text,save:vr.save.text,destroy:vr.destroy.text,edit:vr.edit.text,update:vr.update.text,canceledit:vr.canceledit.text,excel:vr.excel.text,pdf:vr.pdf.text},noRecords:er,expandCollapseColumnHeader:""}},destroy:function(){var t,r=this;r._angularItems("cleanup"),r._destroyColumnAttachments(),ze.fn.destroy.call(r),this._navigatableTables=null,r._resizeHandler&&e(window).off("resize"+lt,r._resizeHandler),r.pager&&r.pager.element&&r.pager.destroy(),r.pager=null,r.groupable&&r.groupable.element&&r.groupable.element.kendoGroupable("destroy"),r.groupable=null,r.options.reorderable&&r.wrapper.data("kendoReorderable").destroy(),r.selectable&&r.selectable.element&&(r.selectable.destroy(),r.clearArea(),r._selectedIds=null,r.copyHandler&&(r.wrapper.off("keydown",r.copyHandler),r.unbind(r.copyHandler)),r.updateClipBoardState&&(r.unbind(r.updateClipBoardState),r.updateClipBoardState=null),r.clearAreaHandler&&r.wrapper.off("keyup",r.clearAreaHandler)),r.selectable=null,r.resizable&&(r.resizable.destroy(),r._resizeUserEvents&&(r._resizeHandleDocumentClickHandler&&e(document).off("click",r._resizeHandleDocumentClickHandler),r._resizeUserEvents.destroy(),r._resizeUserEvents=null),r.resizable=null),r._destroyVirtualScrollable(),r._destroyEditable(),r.dataSource&&(r.dataSource.unbind(mt,r._refreshHandler).unbind(je,r._progressHandler).unbind(Ue,r._errorHandler),r._refreshHandler=r._progressHandler=r._errorHandler=null),t=r.element.add(r.wrapper).add(r.table).add(r.thead).add(r.wrapper.find(">.k-grid-toolbar")),r.content&&(t=t.add(r.content).add(r.content.find(">.k-virtual-scrollable-wrap"))),r.lockedHeader&&r._removeLockedContainers(),r.pane&&r.pane.destroy(),r.minScreenResizeHandler&&e(window).off("resize",r.minScreenResizeHandler),r._detachColumnMediaResizeHandler(),r._draggableInstance&&r._draggableInstance.element&&r._draggableInstance.destroy(),r._draggableInstance=null,t.off(lt),Se.destroy(r.wrapper),r.rowTemplate=r.altRowTemplate=r.lockedRowTemplate=r.lockedAltRowTemplate=r.detailTemplate=r.footerTemplate=r.groupFooterTemplate=r.lockedGroupFooterTemplate=r.noRecordsTemplate=null,r.scrollables=r.thead=r.tbody=r.element=r.table=r.content=r.footer=r.wrapper=r.lockedTable=r.lockedContent=r.lockedHeader=r.lockedFooter=r._groupableClickHandler=r._groupRows=r._setContentWidthHandler=null},getOptions:function(){var r,l,o,a=this.options;return a.dataSource=null,r=Fe(!0,{},this.options),r.columns=Se.deepExtend([],this.columns),l=this.dataSource,o=l.options.data&&l._data,l.options.data=null,r.dataSource=e.extend(!0,{},l.options),l.options.data=o,r.dataSource.data=o,r.dataSource.page=l.page(),r.dataSource.filter=l.filter(),r.dataSource.pageSize=l.pageSize(),r.dataSource.sort=l.sort(),r.dataSource.group=l.group(),r.dataSource.aggregate=l.aggregate(),r.dataSource.transport&&(r.dataSource.transport.dataSource=null),r.pageable&&r.pageable.pageSize&&(r.pageable.pageSize=l.pageSize()),r.$angular=t,r},setOptions:function(e){var t,r,l,o,a=this.getOptions();Se.deepExtend(a,e),e.dataSource||(a.dataSource=this.dataSource),t=this.wrapper,r=this._events,l=this.element,this.destroy(),this.options=null,this._isMobile&&(o=t.closest(Se.roleSelector("pane")).parent(),o.after(t),o.remove(),t.removeClass("k-grid-mobile")),t[0]!==l[0]&&(t.before(l),t.remove()),l.empty(),this.init(l,a,r),this._setEvents(a)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,r,l=Se.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=l.length,t=Array(2*e),r=e;--r>=0;)t[r]=t[r+e]=l[r];l=t}return l},_destroyColumnAttachments:function(){
var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),r=t.data("kendoFilterMenu"),l=t.data("kendoColumnSorter"),o=t.data("kendoColumnMenu");r&&r.destroy(),l&&l.destroy(),o&&o.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,r,l=this,o=U(l.columns||[]);for(t=0,r=o.length;t<r;t++)e=o[t].command,e&&s(l,l.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),r.length||(r=e("<table />").appendTo(t.element))),mr&&r.attr("cellspacing",0),t.table=r.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,r){var l,o,a,n,i,s,d,c=this,u=c.options.columnResizeHandleWidth,p=c.options.scrollable,h=c.resizeHandle,f=this._groups();if(h&&c.lockedContent&&h.data("th")[0]!==r[0]&&(h.off(lt).remove(),h=null),h||(h=c.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(h)),fr)l=r.position().left,p&&(n=r.closest(".k-grid-header-wrap, .k-grid-header-locked"),i=gr.msie?n.scrollLeft():0,s=gr.webkit?n[0].scrollWidth-n[0].offsetWidth-n.scrollLeft():0,d=gr.mozilla?n[0].scrollWidth-n[0].offsetWidth-(n[0].scrollWidth-n[0].offsetWidth-n.scrollLeft()):0,l-=s-d+i);else{for(l=r[0].offsetWidth,o=$(r.closest("thead")).filter(":visible"),a=0;a<o.length&&o[a]!=r[0];a++)l+=o[a].offsetWidth;f>0&&(l+=Ee(t.find(".k-group-cell:first"))*f),c._hasDetails()&&(l+=Ee(t.find(".k-hierarchy-cell:first")))}h.css({top:r.position().top,left:l-u,height:Me(r),width:3*u}).data("th",r).show(),h.off("dblclick"+lt).on("dblclick"+lt,function(){c._autoFitLeafColumn(r.data("index"))})},_positionColumnResizeHandle:function(){var r=this,l=r.lockedHeader?r.lockedHeader.find("thead:first"):e();r.thead.add(l).on("mousemove"+lt,"th",function(l){var o=t!==l.buttons?l.buttons:l.which||l.button,a=e(this);a.hasClass("k-group-cell")||a.hasClass("k-hierarchy-cell")||t!==o&&0!==o||r._createResizeHandle(a.closest("div"),a)})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(lt).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new Se.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(r){var l=e(r.target);r.preventDefault(),l.addClass("k-column-active"),t._createResizeHandle(l.closest("div"),l),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Be(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(r,l){var o,a,n,i,s=this,d=!!r.locked,c=!!r.hidden,u=this.options,p=Se.support.mobileOS?0:Se.support.scrollbar(),h=d?Pe(r,K(s.columns)):Pe(r,G(s.columns)),f=d?s.lockedTable:s.table,g=s.footer||e(),m=d?s.lockedHeader.find("table"):s.thead.closest("table"),b=r.minResizableWidth||10,k=Ee(d?f.find("tbody"):s.tbody);return c?(r.width=l>b?l:b,t):(s.footer&&s.lockedContent&&(g=s.footer.children(d?".k-grid-footer-locked":".k-grid-footer-wrap")),o=u.scrollable?m.find("col:not(.k-group-col,.k-hierarchy-col):eq("+h+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")")):f.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")"),u.scrollable?(a=!1,n=s.wrapper.width()-p,i=l=l>b?l:b,d&&k-l+i>n&&(i=l+(n-k-2*p),i<0&&(i=l),a=!0),i>10&&i>=b&&(o.css("width",i),k&&(i=a?n-2*p:k+(l-r.width),f.add(m).add(g).css("width",i),d||(s._footerWidth=i))),s._scrollVirtualWrapperOnColumnResize()):l>10&&l>=b&&o.css("width",l),r.width=l,s._applyLockedContainersWidth(),s._syncLockedContentHeight(),s._syncLockedHeaderHeight(),t)},_resizable:function(){var t,r,l,o,n,i,s,d,c=this,u=c.options,p=this._isMobile,h=Se.support.mobileOS?0:Se.support.scrollbar();u.resizable&&(t=u.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,p?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new Te.Resizable(t.add(c.lockedHeader),{handle:(u.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:Me(t.data("th"))+c.tbody.attr("clientHeight")})},start:function(t){var h,f,g,m,b;d=e(t.currentTarget).data("th"),p&&c._hideResizeHandle(),h=d.closest("table"),f=e.inArray(d[0],$(d.closest("thead")).filter(":visible")),i=h.parent().hasClass("k-grid-header-locked"),g=i?c.lockedTable:c.table,m=c.footer||e(),c.footer&&c.lockedContent&&(m=c.footer.children(i?".k-grid-footer-locked":".k-grid-footer-wrap")),a(c.wrapper,"col-resize"),s=u.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")").add(g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")):g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")"),b=e.map(c.columns,function(e){return!e.hidden&&(i&&e.locked||!i&&!e.locked)?e:null}),r=t.x.location,l=Ee(d),o=U(b)[f].minResizableWidth||10,n=Ee(i?g.children("tbody"):c.tbody),gr.webkit&&c.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var a,p,f,g,m,b,k=fr?-1:1,_=l+t.x.location*k-r*k;u.scrollable?(i&&c.lockedFooter?a=c.lockedFooter.children("table"):c.footer&&(a=c.footer.find(">.k-grid-footer-wrap>table")),a&&a[0]||(a=e()),p=d.closest("table"),f=i?c.lockedTable:c.table,g=!1,m=c.wrapper.width()-h,b=_,i&&n-l+b>m&&(b=l+(m-n-2*h),b<0&&(b=_),g=!0),b>10&&b>=o&&(s.css("width",b),n&&(b=g?m-2*h:n+t.x.location*k-r*k,f.add(p).add(a).css("width",b),i||(c._footerWidth=b))),c._scrollVirtualWrapperOnColumnResize()):_>10&&_>=o&&s.css("width",_)},resizeend:function(){var e,t,r,o=Ee(d);a(c.wrapper,""),gr.webkit&&c.wrapper.removeClass("k-grid-column-resizing"),l!=o&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):d.parent(),r=d.attr(Se.attr("index")),r||(r=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(d)),e=U(c.columns)[r],e.width=o,c.trigger(Ft,{column:e,oldWidth:l,newWidth:o}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),d=null}}))},_draggable:function(){var t,r=this;r.options.reorderable&&(r._draggableInstance&&r._draggableInstance.destroy(),t=r.wrapper.children(".k-grid-header"),r._draggableInstance=r.wrapper.kendoDraggable({group:Se.guid(),autoScroll:!0,filter:r.content?".k-grid-header:first "+rt:"table:first>.k-grid-header "+rt,dragstart:function(){t.children(".k-grid-header-wrap").unbind("scroll"+lt+"scrolling").bind("scroll"+lt+"scrolling",function(e){r.virtualScrollable?r.content.find(">.k-virtual-scrollable-wrap").scrollLeft(this.scrollLeft):r.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft)})},dragend:function(){t.children(".k-grid-header-wrap").unbind("scroll"+lt+"scrolling")},drag:function(){r._hideResizeHandle()},hint:function(t){var r=t.attr(Se.attr("title"));return r&&(r=Se.htmlEncode(r)),e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(r||t.attr(Se.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />')}}).data("kendoDraggable"))},_reorderable:function(){var t=this;t.options.reorderable&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e,r){var l=L(t.columns);return l[e].lockable!==!1&&D(l,t.columns,e,r)>-1},inSameContainer:function(r){return e(r.source).parent()[0]===e(r.target).parent()[0]&&D(L(t.columns),t.columns,r.sourceIndex,r.targetIndex)>-1},change:function(e){var r=L(t.columns),l=r[e.oldIndex],o=D(r,t.columns,e.oldIndex,e.newIndex);t.trigger(At,{newIndex:o,oldIndex:Pe(l,r),column:l}),t.reorderColumn(o,l,"before"===e.position)}}))},_reorderHeader:function(e,t,r){var l,o,a,s,d=this,c=I(e[0],d.columns),u=I(t,d.columns),p=[];for(l=0;l<e.length;l++)e[l].columns&&(p=p.concat(e[l].columns));o=i(d.lockedHeader,d.thead,"tr:eq("+c.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),a=N(e).length,s=N([t]).length,p.length?(a>0&&0===s?T(e,t,p,d.columns,d.lockedHeader.find("thead"),d.thead,this._groups()):0===a&&s>0&&T(e,t,p,d.columns,d.thead,d.lockedHeader.find("thead"),this._groups()),(t.columns||c.cell-u.cell>1||u.cell-c.cell>1)&&(t=E(d.columns,t,e[0],r,d.columns),t&&d._reorderHeader(p,t,r))):a!==s&&S(o[c.cell],d.columns,a),n(o,c.cell,u.cell,r,e.length)},_reorderContent:function(t,r,l){var o,a,s,d,c,u,p=this,h=e(),f=t[0],g=v(t),m=Pe(f,U(p.columns)),b=Pe(r,U(p.columns)),k=Pe(g[0],j(p.columns)),_=Pe(r,j(p.columns)),w=N(p.columns).length,C=!!r.locked,y=p.footer||p.wrapper.find(".k-grid-footer"),S=o=_;for(r.hidden&&(s=C?N(p.columns):O(p.columns),v(s).length>0?(S=o=_=this._findClosestVisibleColumnIndex(s,b),a=v(s.slice(b)).length>0):C?(_=p.lockedTable.find("colgroup"),S=p.lockedHeader.find("colgroup"),o=e(p.lockedFooter).find(">table>colgroup")):(_=p.tbody.prev(),S=p.thead.prev(),o=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),p._hasFilterRow()&&n(p.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),m,b,l,t.length),k>=0&&n(i(p.lockedHeader,p.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),k,S,a?a:l,g.length),p.options.scrollable&&k>=0&&n(i(p.lockedTable,p.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),k,_,a?a:l,g.length),y&&y.length&&(k>=0&&n(i(p.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),k,o,a?a:l,g.length),n(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),m,b,l,t.length)),d=p.tbody.children(":not(.k-grouping-row,.k-detail-row)"),p.lockedTable&&(w>b?w<=m&&de(p.lockedTable.find(">tbody>tr.k-grouping-row"),p.table.find(">tbody>tr.k-grouping-row"),t.length):w>m&&de(p.table.find(">tbody>tr.k-grouping-row"),p.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),h=p.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),c=0,u=d.length;c<u;c+=1)n(i(h[c],d[c],">td:not(.k-group-cell,.k-hierarchy-cell)"),m,b,l,t.length)},_findClosestVisibleColumnIndex:function(e,t){var r=v(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),l=v(r)[0];return Pe(l,v(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(U(this.columns)[e])},autoFitColumn:function(t){var r,l,o,a,n,i,s,d,c,u,p,h,f,g,m,k,v,w,C,y,S=this,T=S.options,x=S.columns,H=S.lockedHeader?$(S.lockedHeader.find(">table>thead")).filter(b).length:0,R="col:not(.k-group-col):not(.k-hierarchy-col)",I="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(t="number"==typeof t?x[t]:De(t)?We(F(x),function(e){return e===t})[0]:We(F(x),function(e){return e.field===t})[0],t&&_(t)){for(i=t.minResizableWidth,r=Pe(t,U(x)),a=t.locked,o=a?S.lockedHeader.children("table"):S.thead.parent(),l=o.find("[data-index='"+r+"']"),c=a?S.lockedTable:S.table,u=S.footer||e(),S.footer&&S.lockedContent&&(u=S.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),p=u.find("table").first(),S.lockedHeader&&!a&&(r-=H),h=0;h<x.length&&x[h]!==t;h++)x[h].hidden&&r--;if(T.scrollable?(n=o.find(R).eq(r).add(c.children("colgroup").find(R).eq(r)).add(p.find("colgroup").find(R).eq(r)),a||(s=c.parent(),d=s.scrollLeft())):n=c.children("colgroup").find(R).eq(r),f=o.add(c).add(p),g=Ee(l),n.width(""),f.css("table-layout","fixed"),n.width("auto"),f.addClass("k-autofitting"),f.css("table-layout",""),m=Math.ceil(Math.max(Ee(l),Ee(c.find("tr:not(.k-grouping-row)").eq(0).children(I).eq(r)),Ee(p.find("tr").eq(0).children(I).eq(r))))+1,i&&i>m&&(m=i),n.width(m),t.width=m,T.scrollable){for(k=o.find("col"),w=0,C=0,y=k.length;C<y;C+=1)if(v=k[C].style.width,v&&v.indexOf("%")==-1)w+=parseInt(v,10);else{if(!k.eq(C).hasClass("k-group-col")){w=0;break}w+=parseInt(k.eq(C).width(),10)}w&&f.each(function(){this.style.width=w+"px"})}gr.msie&&8==gr.version&&(f.css("display","inline-table"),setTimeout(function(){f.css("display","table")},1)),f.removeClass("k-autofitting"),d&&s.scrollLeft(d),S.trigger(Ft,{column:t,oldWidth:g,newWidth:m}),S._applyLockedContainersWidth(),S._syncLockedContentHeight(),S._syncLockedHeaderHeight()}},reorderColumn:function(e,r,l){var o,a,n=this,i=c(r,n.columns),s=i?i.columns:n.columns,d=Pe(r,s),u=s[e],p=!!u.locked,h=N(n.columns).length,f=We(U(n.columns),function(e){return e.groupHeaderColumnTemplate});d!==e&&(!r.locked&&p&&1==O(n.columns).length||r.locked&&!p&&1==h||(n._hideResizeHandle(),l===t&&(l=e<d),a=[r],n._reorderHeader(a,u,l),n.lockedHeader&&(V(n.thead),V(n.lockedHeader)),u.columns&&(u=U(u.columns),u=u[l?0:u.length-1]),r.columns&&(a=U(r.columns)),n._reorderContent(a,u,l),o=!!r.locked,o=o!=p,r.locked=p,s.splice(l?e:e+1,0,r),s.splice(d<e?d:d+1,1),n._templates(),n._updateColumnCellIndex(),f.length>0&&n._renderGroupRows(),n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedHeaderHeight(),n._syncLockedContentHeight(),n._updateFirstColumnClass(),o&&(p?n.trigger(Wt,{column:r}):n.trigger(qt,{column:r}))))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=x(e,N(this.columns))),x(this.thead,O(this.columns),t)},lockColumn:function(e){var t,r=this.columns;e="number"==typeof e?r[e]:We(r,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=N(r).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,r=this.columns;e="number"==typeof e?r[e]:We(r,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=N(r).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var r=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(r=U(N(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+r},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var r=t.attr(Se.attr("uid"));return this.dataSource.getByUid(r)},_editable:function(){var t,r=this,l=r.selectable&&r.selectable.options.multiple,o=r.options.editable,a=function(){var t=Ie(),l=r._editContainer;!l||e.contains(l[0],t)||l[0]===t||e(t).closest(".k-animation-container").length||(r.editable.end()?r.closeCell():r._scrollVirtualWrapper())};o&&(this.wrapper.addClass("k-editable"),t=r._editMode(),"incell"===t?(r.table.add(r.lockedTable).on("mousedown"+lt,Je+">"+Ye,function(t){var l=e(t.target);"incell"===r._editMode()&&l.hasClass("k-checkbox-label")&&l.prev().attr(Se.attr("bind"))&&t.preventDefault()}),o.update!==!1&&r.wrapper.on(Vt+lt,"tr:not(.k-grouping-row) > td",function(t){var o=e(this),a=r.lockedTable&&o.closest("table")[0]===r.lockedTable[0];o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.has("a.k-grid-delete").length||o.has("button.k-grid-delete").length||o.closest("tbody")[0]!==r.tbody[0]&&!a||e(t.target).is(":input")||(r.editable?r.editable.end()?(l&&e(Ie()).blur(),r.closeCell(),r.editCell(o)):r._scrollVirtualWrapper():r.editCell(o))}).on("focusin"+lt,function(){e.contains(this,Ie())||(clearTimeout(r.timer),r.timer=null)}).on("focusout"+lt,function(){r.timer=setTimeout(a,1)})):o.update!==!1&&(r.wrapper.on(Vt+lt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),r.editRow(e(this).closest("tr"))}),r._isVirtualInlineEditable()&&r.wrapper.on("focusout"+lt,"tr:not(.k-grouping-row) > td",function(){r.editable&&!r.editable.end()&&r._scrollVirtualWrapper()})),o.destroy!==!1?r.wrapper.on(Vt+lt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),r.removeRow(e(this).closest("tr"))}):r.wrapper.on(Vt+lt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),r._confirmation()||e.preventDefault()}))},editCell:function(t){var r,l,o,a;if(t=e(t),r=this,l=U(r.columns)[r.cellIndex(t)],o=r._modelForContainer(t),r.closeCell(),o&&ge(l,o)&&!l.command){if(r.trigger(it,{model:o}))return;r._attachModelChange(o),r._editContainer=t,r._shouldClearEditableState&&r._clearEditableState(),r.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:l.field,format:l.format,editor:l.editor,values:l.values},model:o,target:r,change:function(e){r.trigger(st,{values:e.values,container:t,model:o})&&e.preventDefault()},skipFocus:!(!r._isVirtualIncellEditable()||!r._editableState)}).data("kendoEditable"),a=t.parent().addClass("k-grid-edit-row"),r.lockedContent&&pe(a[0],r._relatedRow(a).addClass("k-grid-edit-row")[0]),r.trigger(nt,{container:t,model:o})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),r=e[0].offsetWidth>t[0].clientWidth?Se.support.scrollbar():0;this.lockedContent.height(t.height()-r)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),ue(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(Vt+lt,"a.k-grid-cancel",e._editCancelClickHandler),t.off(Vt+lt,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,r=e._modelForContainer(t);r&&r.unbind(mt,e._modelChangeHandler)},closeCell:function(e){var t,r,l,o=this,a=o._editContainer;a&&(l=o._modelForContainer(a),e&&o.trigger("cancel",{container:a,model:l})||(o.trigger(gt,{type:e?"cancel":"save",model:l,container:a}),a.removeClass("k-edit-cell"),t=U(o.columns)[o.cellIndex(a)],r=a.parent().removeClass("k-grid-edit-row"),o.lockedContent&&o._relatedRow(r).removeClass("k-grid-edit-row"),o._destroyEditable(),o._displayCell(a,t,l),o._shouldClearEditableState&&o._clearEditableState(),o.trigger("itemChange",{item:r,data:l,ns:Te}),o.lockedContent&&pe(r.css("height","")[0],o._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,r){var l=this,o={storage:{},count:0},a=Fe({},Se.Template,l.options.templateSettings),n=Se.template(l._cellTmpl(t,o),a);o.count>0&&(n=Be(n,o.storage)),e.empty().html(n(r)),l.angular("compile",function(){return{elements:e,data:[{dataItem:r}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var r,l,o,a,n=this,i=n._editMode();"incell"!==i&&n.cancelRow(),t=e(t),n.lockedContent&&(t=t.add(n._relatedRow(t))),t=t.hide(),r=n._modelForContainer(t),r&&!n.trigger(dt,{row:t,model:r})?(a=n.dataSource.options.schema,n._selectedIds&&a&&a.model&&(l=n.dataSource.options.schema.model.id,o=r[l],delete n._selectedIds[o]),n.dataSource.remove(r),"inline"!==i&&"popup"!==i||n.dataSource.sync()):"incell"===i&&n._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var r,l,o,a=this;t instanceof He?r=t:(t=e(t),r=a._modelForContainer(t)),l=a._editMode(),a.cancelRow(),r&&(t=a.tbody.children("["+Se.attr("uid")+"="+r.uid+"]"),a._attachModelChange(r),"popup"===l?a._createPopupEditor(r):"inline"===l?a._createInlineEditor(t,r):"incell"===l&&e(t).children($e).each(function(){var t=e(this),l=U(a.columns)[a.cellIndex(t)];if(r=a._modelForContainer(t),r&&(!r.editable||r.editable(l.field))&&l.field&&!l.selectable)return a.editCell(t),!1}),o=a.editView?a.editView.element:a._editContainer,o&&(this._editCancelClickHandler||(this._editCancelClickHandler=Be(this._editCancelClick,this)),o.on(Vt+lt,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Be(this._editUpdateClick,this)),o.on(Vt+lt,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var r,l=this,o=l.options.navigatable,a=l.editable.options.model,n=l.editView?l.editView.element:l._editContainer;t.preventDefault(),t.stopPropagation(),l.trigger("cancel",{container:n,model:a})||(r=l.items().index(e(l.current()).parent()),l.cancelRow(),o&&(l._setCurrent(l.items().eq(r).children().filter(Ye).first()),fe(l.table,!0)))},_createPopupEditor:function(r){var l,o,a,n,i,s,d,c,u,p,h,f,g,m=this,b="<div "+Se.attr("uid")+'="'+r.uid+'" class="k-popup-edit-form'+(m._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',k=[],_=U(m.columns),v=m.options.editable,w=v.template,C=De(v)?v.window:{},y=Fe({},Se.Template,m.options.templateSettings);if(!m.trigger(it,{model:r})){if(C=C||{},w)for(typeof w===Gt&&(w=window.unescape(w)),b+=Se.template(w,y)(r),a=0,n=_.length;a<n;a++)l=_[a],l.command&&(p=he(l.command,"edit"),p&&(o=p));else for(a=0,n=_.length;a<n;a++)l=_[a],l.selectable||(l.command?l.command&&(p=he(l.command,"edit"),p&&(o=p)):(b+='<div class="k-edit-label"><label for="'+l.field+'">'+(l.title||l.field||"")+"</label></div>",ge(l,r)?(k.push({field:l.field,format:l.format,editor:l.editor,values:l.values}),b+="<div "+Se.attr("container-for")+'="'+l.field+'" class="k-edit-field"></div>'):(f={storage:{},count:0},i=Se.template(m._cellTmpl(l,f),y),f.count>0&&(i=Be(i,f.storage)),b+='<div class="k-edit-field">'+i(r)+"</div>")));o&&De(o)&&(De(o.text)&&(s=o.text.update,d=o.text.cancel),De(o.iconClass)&&(c=o.iconClass.update,u=o.iconClass.cancel),o.attr&&(h=o.attr)),m._isMobile?(b+="</div></div>",m.editView=m.pane.append("<div data-"+Se.ns+'role="view" data-'+Se.ns+'use-native-scrolling="true" data-'+Se.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+Se.ns+'role="header" class="k-header">'+m._createButton({name:"update",text:s,attr:h})+(C.title||"Edit")+m._createButton({name:"canceledit",text:d,attr:h})+"</div>"+b+"</div>"),g=m._editContainer=m.editView.element.find(".k-popup-edit-form")):(b+='<div class="k-edit-buttons k-state-default">',b+=m._createButton({name:"update",text:s,attr:h,iconClass:c})+m._createButton({name:"canceledit",text:d,attr:h,iconClass:u}),b+="</div></div></div>",g=m._editContainer=e(b).appendTo(m.wrapper).eq(0).kendoWindow(Fe({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(l){if(l.userTriggered){if(l.sender.element.focus(),m.trigger("cancel",{container:g,model:r}))return l.preventDefault(),t;var o=m.items().index(e(m.current()).parent());m.cancelRow(),m.options.navigatable&&(m._setCurrent(m.items().eq(o).children().filter(Ye).first()),fe(m.table,!0))}}},C))),m.editable=m._editContainer.kendoEditable({fields:k,model:r,clearContainer:!1,target:m}).data("kendoEditable"),m._isMobile&&g.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),m._openPopUpEditor(),m.trigger(nt,{container:g,model:r})}},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,r){var l,o,a,n=this,i=[];n.trigger(it,{model:r})||(n.lockedContent&&(t=t.add(n._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(o=e(this),l=U(n.columns)[n.cellIndex(o)],!l.command&&ge(l,r))i.push({field:l.field,format:l.format,editor:l.editor,values:l.values}),o.attr(Se.attr("container-for"),l.field),o.empty();else if(l.command&&(a=he(l.command,"edit"))){o.empty();var t,s,d,c,u;De(a)&&(De(a.text)&&(t=a.text.update,s=a.text.cancel),De(a.iconClass)&&(d=a.iconClass.update,c=a.iconClass.cancel),a.attr&&(u=a.attr)),e(n._createButton({name:"update",text:t,attr:u,iconClass:d})+n._createButton({name:"canceledit",text:s,attr:u,iconClass:c})).appendTo(o)}}),n._editContainer=t,n._editContainer.addClass("k-grid-edit-row"),n._shouldClearEditableState&&n._clearEditableState(),n.editable=new Se.ui.Editable(n._editContainer,{target:n,fields:i,model:r,skipFocus:!!(n._isVirtualInlineEditable()&&n._editableState&&n._editableState.field),clearContainer:!1}),t.length>1&&(pe(t[0],t[1]),n._applyLockedContainersWidth()),n.trigger(nt,{container:t,model:r}))},cancelRow:function(e){var t,r=this,l=r._editContainer;if(l){if(t=r._modelForContainer(l),!t||e&&r.trigger("cancel",{container:l,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._clearEditableState(),r._displayRow("popup"!==r._editMode()?l:r.tbody.find("["+Se.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t,r=this,l=this._editContainer,o=this._modelForContainer(l),a=e.Deferred();return l&&this.editable?(t=r.editable&&r.editable.end(),!t||this.trigger(st,{container:l,model:o})?(t||r._scrollVirtualWrapper(),a.reject().promise()):(r._clearEditableState(),this.dataSource.sync())):a.resolve().promise()},_displayRow:function(t){var r,l,o,a,n,i=this,s=i._modelForContainer(t),d=t.hasClass("k-state-selected"),c=t.hasClass("k-alt");s&&(i.lockedContent&&(r=e((c?i.lockedAltRowTemplate:i.lockedRowTemplate)(s)),i._relatedRow(t.last()).replaceWith(r)),i.angular("cleanup",function(){return{elements:t.get()}}),l=e((c?i.altRowTemplate:i.rowTemplate)(s)),t.is(":visible")||l.hide(),t.replaceWith(l),i.trigger("itemChange",{item:l,data:s,ns:Te}),r&&r.length&&i.trigger("itemChange",{item:r,data:s,ns:Te}),a=l,n=[{dataItem:s}],r&&r.length&&(a=l.add(r),n.push({dataItem:s})),i.angular("compile",function(){return{elements:a.get(),data:n}}),d&&(i.options.selectable||i._checkBoxSelection)&&i.select(l.add(r)),r&&pe(l[0],r[0]),o=l.next(),o.hasClass("k-detail-row")&&o.is(":visible")&&l.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse"))},_showMessage:function(t,r){var l,o,a,n=this;return n._isMobile?(l=Se.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),o=e(l(t)).appendTo(n.view.element),a=n._actionSheet=new Se.mobile.ui.ActionSheet(o,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var l=e(t.currentTarget).parent();l.hasClass("km-actionsheet-cancel")||n._removeRow(r)},popup:n._actionSheetPopupOptions}),a.open(r),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,r=t.options.editable,l=r===!0||typeof r===Gt?t.options.messages.editable.confirmation:r.confirmation;return De(r)&&typeof r.mode===Gt&&typeof l!==Ot&&typeof l!==Gt&&l!==!1&&(l=t.options.messages.editable.confirmation),l===!1||null==l||(typeof l===Ot&&(l=l(t._modelForContainer(e))),t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:l===!0?t.options.messages.editable.confirmation:l},e))},cancelChanges:function(){var e=this;e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop(function(){e.virtualScrollable.scrollToTop()})},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(_t)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,r=this,l=r.dataSource,o=r._editMode(),a=r.options.editable.createAt||"",n=l.pageSize(),i=l.view()||[],s=a.toLowerCase()===Kt,d=r._isVirtualEditable();r.editable&&r.editable.end()||!r.editable?("incell"!=o&&r.cancelRow(),e=l.indexOf(i[0]),s&&(e+=i.length,n&&!l.options.serverPaging&&n<=i.length&&(e-=1)),e<0&&(e=l.page()>l.totalPages()?(l.page()-1)*n:0),r.options.navigatable&&"incell"==o&&r._removeCurrent(),d?r._virtualAddRow():(t=l.insert(e,{}),r._editModel(t))):r._scrollVirtualWrapper()},_editModel:function(e){var t,r,l,o,a=this,n=a.options.editable.createAt||"",i=a._editMode();e&&(t=e.uid,r=a.lockedContent?a.lockedTable:a.table,l=r.find("tr["+Se.attr("uid")+"="+t+"]"),o=l.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(l)),"inline"===i&&l.length?a.editRow(l):"popup"===i?a.editRow(e):o.length&&a.editCell(o),"bottom"==n.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.table[0].offsetHeight))},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===Kt;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,r=t.dataSource,l=t.virtualScrollable;1===r.page()?(e=r.insert(0,{}),t._editModel(e),l.scrollToTop()):t._virtualPageToTop(function(){e=r.insert(0,{}),t._editModel(e),l.scrollToTop()})},_virtualAddRowAtBottom:function(){var e,t=this,r=t.dataSource,l=t.virtualScrollable,o=r.total();r.at(o-1)instanceof He?(e=r.insert(o,{}),t._virtualPageToBottom(function(){t._editModel(e),l.scrollToBottom()})):t._virtualPageToBottom(function(){e=r.insert(o,{}),t._editModel(e),l.scrollToBottom()})},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),function(){e()})},_virtualPageToBottom:function(e){var t=this,r=t.dataSource,l=r.take(),o=r.total(),a=o>l?o-l:0;t._virtualPage(a,l,function(){e()})},_virtualPage:function(e,t,r){var l=this;l._isVirtualEditable()&&(l.virtualScrollable._preventScroll=!0,l.virtualScrollable._page(e,t,r))},_firstEditableColumnIndex:function(e){var t,r,l,o=this,a=U(o.columns),n=o._modelForContainer(e);for(r=0,l=a.length;r<l;r++)if(t=a[r],n&&(!n.editable||n.editable(t.field))&&!t.command&&t.field&&t.hidden!==!0)return r;return-1},_toolbar:function(){var t,r=this,l=r.wrapper,o=r.options.toolbar,a=r.options.editable;o&&(t=r.wrapper.find(".k-grid-toolbar"),t.length||(Ne(o)||(o=typeof o===Gt?o:r._toolbarTmpl(o).replace(ir,"\\#"),o=Be(Se.template(o),r)),t=e('<div class="k-header k-grid-toolbar" />').html(o({})).prependTo(l),r.angular("compile",function(){return{elements:t.get()}})),a&&a.create!==!1&&t.on(Vt+lt,".k-grid-add",function(e){e.preventDefault(),r.addRow()}).on(Vt+lt,".k-grid-cancel-changes",function(e){e.preventDefault(),r.cancelChanges()}).on(Vt+lt,".k-grid-save-changes",function(e){e.preventDefault(),r.saveChanges()}),t.on(Vt+lt,".k-grid-excel",function(e){e.preventDefault(),r.saveAsExcel()}),t.on(Vt+lt,".k-grid-pdf",function(e){e.preventDefault(),r.saveAsPDF()}))},_toolbarTmpl:function(e){var t,r,l=this,o="";if(qe(e))for(t=0,r=e.length;t<r;t++)o+=l._createButton(e[t]);return o},_createButton:function(e){var r,l=e.template||ur,a=typeof e===Gt?e:e.name||e.text,n=vr[a]?vr[a].className:"k-grid-"+(a||"").replace(/\s/g,""),i={className:n,text:a,attr:"",iconClass:""},s=this.options.messages.commands;if(!(a||De(e)&&e.template))throw Error("Custom commands should have name specified");
return De(e)?(e=Fe(!0,{},e),e.className&&Pe(i.className,e.className.split(" "))<0?e.className+=" "+i.className:e.className===t&&(e.className=i.className),"edit"===a&&(e=Fe(!0,{},e),e.text=De(e.text)?e.text.edit:e.text,e.iconClass=De(e.iconClass)?e.iconClass.edit:e.iconClass),e.attr&&(De(e.attr)&&(e.attr=o(e.attr)),typeof e.attr===Gt&&(r=e.attr.match(/class="(.+?)"/),r&&Pe(r[1],e.className.split(" "))<0&&(e.className+=" "+r[1]))),i=Fe(!0,i,vr[a],{text:s[a]},e)):i=Fe(!0,i,vr[a],{text:s[a]}),Se.template(l)(i)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Vt+lt,t._groupableClickHandler):t._groupableClickHandler=function(r){var l=e(this),o=l.closest("tr"),a=t._groupRows?t._groupRows[t.wrapper.find(".k-grouping-row").index(o)]:{};l.hasClass("k-i-collapse")?t.trigger("groupCollapse",{group:a,element:o})||t.collapseGroup(o):t.trigger("groupExpand",{group:a,element:o})||t.expandGroup(o),r.preventDefault(),r.stopPropagation()},t._isLocked()?t.lockedTable.on(Vt+lt,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler):t.table.on(Vt+lt,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,r=t.wrapper,l=t.options.groupable,o=rt+"["+Se.attr("field")+"]",a=t.content?".k-grid-header:first "+o:"table:first>.k-grid-header "+o;l&&l.enabled!==!1&&(r.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(r),t.groupable&&t.groupable.destroy(),t.groupable=new Te.Groupable(r,Fe({},l,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:a,filter:a,allowDrag:t.options.reorderable,change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource._skip=0,t.dataSource._page=1))}})))},_continuousItems:function(t,r){var l,o,a,n,i,s,d,c;if(this.lockedContent){for(l=this,o=l.table.add(l.lockedTable),a=e(t,o[0]),n=e(t,o[1]),i=r?N(l.columns).length:1,s=r?l.columns.length-i:1,d=[],c=0;c<a.length;c+=i)Ve.apply(d,a.slice(c,c+i)),Ve.apply(d,n.splice(0,s));return d}},_selectable:function(){var r,l,o,a,n=this,i=[],s=n._isLocked(),d=n.options.selectable;d&&(n.selectable&&n.selectable.destroy(),n._selectedIds={},d=Se.ui.Selectable.parseOptions(d),r=d.multiple,l=d.cell,n._hasDetails()&&(i[i.length]=".k-detail-row"),(n.options.groupable||n._hasFooters()||n._groups())&&(i[i.length]=".k-grouping-row,.k-group-footer"),i=i.join(","),""!==i&&(i=":not("+i+")"),o=n.table,s&&(o=o.add(n.lockedTable)),a=">"+(l?Qe:"tbody>tr"+i),n.selectable=new Se.ui.Selectable(o,{filter:a,aria:!0,multiple:r,change:function(){l||n._persistSelectedRows(),n.trigger(mt)},useAllItems:s&&r&&l,relatedTarget:function(t){var r,o,a,i;if(!l&&s){for(o=e(),a=0,i=t.length;a<i;a++)r=n._relatedRow(t[a]),Pe(r[0],t)<0&&(o=o.add(r));return o}},continuousItems:function(){return n._continuousItems(a,l)}}),n.options.navigatable&&o.on("keydown"+lt,function(a){var i=n.current(),d=a.target;if(a.keyCode===Le.SPACEBAR&&!a.shiftKey&&e.inArray(d,o)>-1&&!i.is(".k-edit-cell,.k-header")&&i.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(a.preventDefault(),a.stopPropagation(),i=l?i:i.parent(),s&&!l&&(i=i.add(n._relatedRow(i))),r)if(a.ctrlKey){if(i.hasClass(zt))return i.removeClass(zt),n.trigger(mt),t}else n.selectable.clear();else n.selectable.clear();l||(n.selectable._lastActive=i),n.selectable.value(i)}else!l&&(e(d).is("td")||e(d).is("table")&&Pe(d,this._navigatableTables))&&(a.shiftKey&&a.keyCode==Le.LEFT||a.shiftKey&&a.keyCode==Le.RIGHT||a.shiftKey&&a.keyCode==Le.UP||a.shiftKey&&a.keyCode==Le.DOWN||a.keyCode===Le.SPACEBAR&&a.shiftKey)&&(a.preventDefault(),a.stopPropagation(),i=i.parent(),s&&(i=i.add(n._relatedRow(i))),r?(n.selectable._lastActive||(n.selectable._lastActive=i),n.selectable.selectRange(n.selectable._firstSelectee(),i)):(n.selectable.clear(),n.selectable.value(i)))}))},_clipboard:function(){var e,t=this.options,r=t.selectable;r&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+lt+" keydown"+lt,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+lt,Je+">"+Ye,Be(be,e)),e.copyHandler=Be(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).focus().select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=Be(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t,r,l,o,a,n,i=this,s=i.select(),d="\t",c=i.options.allowCopy,u=!0;return e.isPlainObject(c)&&c.delimeter&&(d=c.delimeter),t="",s.length&&(s.eq(0).is("tr")&&(s=s.find("td:not(.k-group-cell)")),u&&s.filter(":visible"),r=[],l=this.columns.length,o=i._isLocked()&&N(i.columns).length,a=!0,e.each(s,function(t,n){var s,d,c,p;n=e(n),s=n.closest("tr"),d=s.index(),c=n.index(),u&&(c-=n.prevAll(":hidden").length),o&&a&&(a=e.contains(i.lockedTable[0],n[0])),i._groups()&&a&&(c-=i._groups()),c=a?c:c+o,l>c&&(l=c),p=n.text(),r[d]||(r[d]=[]),r[d][c]=p}),n=r.length,r=e.each(r,function(e,t){t&&(r[e]=t.slice(l),n>e&&(n=e))}),e.each(r.slice(n),function(e,r){t+=r?r.join(d)+"\r\n":"\r\n"})),t},clearArea:function(t){var r;this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(r=this.options.navigatable?e(this.current()).closest("table"):this.table,fe(r,!0)),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return w(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=Be(t._onColumnMediaResize,t),e(window).on(Dt+lt,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var t=this;t._columnMediaResizeHandler&&e(window).on(Dt+lt,t._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t,r=e||[];for(t=0;t<r.length;t++)this._setColumnMediaVisibility(r[t])},_setColumnMediaVisibility:function(e){var t=this;C(e.media)||(m(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e))},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),g(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),g(e)},_setContentMediaWidth:function(){var t,r,l,o,a,n,i,s,d,c,u,p,h,f,g,m=this,_=m.options,v=m._isLocked();if(_.scrollable&&_.resizable&&(v&&m.lockedFooter?t=m.lockedFooter.children("table"):m.footer&&(t=m.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e()),r=v?m.wrapper.find(".k-grid-header-locked").find("table"):m.wrapper.find(".k-grid-header").find("table"),l=v?m.lockedTable:m.table,o=r.find("th"),a=r.find("colgroup"),n=o.length,i=o.filter(b).length,s=o.length-i,d=0,""!==r[0].style.width&&parseFloat(r[0].style.width)!==d)){for(c=r.css("width"),u=0;u<n;u++)k(o[u])&&(h=Math.max(u,u-s),f=a.children()[h],g=f?f.style.width:"",""!==g?p=parseFloat(g):(r.css("width","auto"),p=Ee(o.eq(u)),r.css("width",c)),d+=p);l.css("width",d-1),r.css("width",d),t.css("width",d)}},_minScreenSupport:function(){var t=this.hideMinScreenCols();t&&(this.minScreenResizeHandler=Be(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,r){var l,o,a,n=!1;for(l=0;l<e.length;l++)o=e[l],a=o.minScreenWidth,a!==t&&null!==a&&(n=!0,a>r?this.hideColumn(o):this.showColumn(o)),!o.hidden&&o.columns&&(n=this._iterateMinScreenCols(o.columns,r)||n);return n},_relatedRow:function(t){var r,l,o=this.lockedTable;return t=e(t),o?(r=t.closest(this.table.add(this.lockedTable)),l=r.find(">tbody>tr").index(t),r=r[0]===this.table[0]?o:this.table,r.find(">tbody>tr").eq(l)):t},_relatedCell:function(t){var r,l,o=this.lockedTable;return t=e(t),o?(r=t.closest(this.table.add(this.lockedTable)),l=r.find(">tbody>tr>td").index(t),r=r[0]===this.table[0]?o:this.table,r.find(">tbody>tr>td").index(l)):t},clearSelection:function(){var e=this;return e.selectable&&e.selectable.clear(),e._checkBoxSelection?(e._deselectCheckRows(e.select()),t):(e.options.persistSelection?e._persistSelectedRows():e._selectedIds={},e.trigger(mt),t)},select:function(r){var l=this,o=l.selectable,a=Se.ui.Selectable.parseOptions(this.options.selectable),n=a.cell;return r=l.table.add(l.lockedTable).find(r),r.length?(o&&!o.options.multiple&&(o.clear(),r=r.first()),l._isLocked()&&(r=r.add(r.map(function(){return n?l._relatedCell(this):l._relatedRow(this)}))),o?o.value(r):(r.each(function(){e(this).addClass(zt).find(Mt).prop("checked",!0).attr("aria-label","Deselect row").attr("aria-checked",!0)}),l.select().length===l.items().length&&l._toggleHeaderCheckState(!0),n||l._persistSelectedRows(),l.trigger(mt)),t):o?o.value():l.items().filter("."+zt)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+Mt).prop("checked",!0).attr("aria-checked",!0).attr("aria-label","Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+Mt).prop("checked",!1).attr("aria-checked",!1).attr("aria-label","Select all rows")},_deselectCheckRows:function(t){var r=this;t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map(function(){return r._relatedRow(this)}))),t.each(function(){e(this).removeClass(zt).find(Mt).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")}),r._toggleHeaderCheckState(!1),r._persistSelectedRows(),r.trigger(mt)},_persistSelectedRows:function(){var e,t,r,l,o=this,a=o.items(),n=o.dataSource.options,i=n.schema,s={};if(i&&i.model&&i.model.id&&o._data)for(r=i.model.id,o.select().each(function(){t=o.dataItem(this),s[t[r]]=!0}),l=0;l<a.length;l++)t=o.dataItem(a[l]),e=t[r],s[e]?o._selectedIds[e]=!0:delete o._selectedIds[e]},selectedKeyNames:function(){var e,t=this,r=[];for(e in t._selectedIds)r.push(e);return r.sort(),r},_updateCurrentAttr:function(t,r){var l=e(t).data("headerId");e(t).removeClass(Rt).closest("table").removeAttr("aria-activedescendant"),l?(l=l.replace(this._cellId,""),e(t).attr("id",l)):e(t).removeAttr("id"),r.data("headerId",r.attr("id")).attr("id",this._cellId).addClass(Rt).closest("table").attr("aria-activedescendant",this._cellId),this._current=r},_scrollCurrent:function(){var t,r,l,o,a,n,i=this._current,s=this.options.scrollable;i&&s&&(t=i.parent(),r=t.closest("table").parent(),l=r.is(".k-grid-content-locked,.k-grid-header-locked"),o=r.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),a=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0],o&&(s.virtual?(n=Math.max(Pe(t[0],this._items(t.parent())),0),this._rowVirtualIndex=this.virtualScrollable.itemIndex(n),this.virtualScrollable.scrollIntoView(t)):this._scrollTo(this._relatedRow(t)[0],a)),this.lockedContent&&(this.lockedContent[0].scrollTop=a.scrollTop),l||this._scrollTo(i[0],a))},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,r){var l=this._current;return t=e(t),t.length&&(l&&l[0]===t[0]||(this._updateCurrentAttr(l,t),this._scrollCurrent(),r||this.trigger(Pt,{element:t}))),t&&t.length&&(this._lastCellIndex=t.parent().children($e).index(t)),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Rt),this._current=null)},_scrollTo:function(t,r){var l,o=t.tagName.toLowerCase(),a="td"===o||"th"===o,n=t[a?"offsetLeft":"offsetTop"],i=t[a?"offsetWidth":"offsetHeight"],s=r[a?"scrollLeft":"scrollTop"],d=r[a?"clientWidth":"clientHeight"],c=n+i,u=0,p=0,h=0;fr&&a&&(l=e(t).closest("table")[0],gr.msie?p=l.offsetLeft:gr.mozilla&&(h=l.offsetLeft-Se.support.scrollbar())),s=Math.abs(s+p-h),u=s>n?n:c>s+d?i<=d?c-d:n:s,u=Math.abs(u+p)+h,r[a?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var t,r,l,o=this;o.options.navigatable&&(t=o.table.add(o.lockedTable),r=o.thead.parent().add(e(">table",o.lockedHeader)),l=t,o.options.scrollable&&(l=l.add(r),r.attr(Nt,-1)),this._navigatableTables=l,l.off("mousedown"+lt+" focus"+lt+" focusout"+lt+" keydown"+lt),r.on("keydown"+lt,Be(o._openHeaderMenu,o)).find("a.k-link").attr("tabIndex",-1),t.attr(Nt,Ke.max(t.attr(Nt)||0,0)).on("mousedown"+lt+" keydown"+lt,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),l.on(Se.support.touch?"touchstart"+lt:"mousedown"+lt,Je+">"+Ye,Be(be,o)).on("focus"+lt,Be(o._tableFocus,o)).on("focusout"+lt,Be(o._tableBlur,o)).on("keydown"+lt,Be(o._tableKeyDown,o)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==Le.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(Nt,-1),e.attr(Nt,0)},_tableFocus:function(t){var r=this.current(),l=e(t.currentTarget);r&&r.is(":visible")?r.addClass(Rt):this._setCurrent(l.find(tt)),this._setTabIndex(l)},_tableBlur:function(){var e=this.current();e&&e.removeClass(Rt)},_tableKeyDown:function(r){var l,o=this.current(),a=this.virtualScrollable&&this.virtualScrollable.fetching(),n=e(r.target),i=!r.isDefaultPrevented()&&!n.is(":button,a,:input,a>.k-icon");return a?(r.preventDefault(),t):(o=o?o:e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(tt),o.length&&(l=!1,i&&r.keyCode==Le.UP&&(l=this._moveUp(o,r.shiftKey)),i&&r.keyCode==Le.DOWN&&(l=this._moveDown(o,r.shiftKey)),i&&r.keyCode==(fr?Le.LEFT:Le.RIGHT)&&(l=this._moveRight(o,r.altKey,r.shiftKey,r.ctrlKey,r.currentTarget)),i&&r.keyCode==(fr?Le.RIGHT:Le.LEFT)&&(l=this._moveLeft(o,r.altKey,r.shiftKey,r.ctrlKey,r.currentTarget)),i&&r.keyCode==Le.PAGEDOWN&&(l=this._handlePageDown()),i&&r.keyCode==Le.PAGEUP&&(l=this._handlePageUp()),i&&r.keyCode==Le.HOME&&(l=this._handleHome(o,r.ctrlKey)),i&&r.keyCode==Le.END&&(l=this._handleEnd(o,r.ctrlKey)),r.keyCode!=Le.ENTER&&r.keyCode!=Le.F2||(l=this._handleEnterKey(o,r.currentTarget,n)),r.keyCode==Le.ESC&&(l=this._handleEscKey(o,r.currentTarget)),r.keyCode==Le.TAB&&(l=this._handleTabKey(o,r.currentTarget,r.shiftKey)),l&&(r.preventDefault(),r.stopPropagation())),t)},_moveLeft:function(t,r,l,o,a){var n,i,s=t.parent(),d=s.parent();return r?this.collapseRow(s):o&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!0):(i=d.find(Je).index(s),n=this._prevHorizontalCell(d,t,i),n[0]||(l?this.lockedTable?(n=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(n=n.prevAll(Xe+":first")),n=n.children($e+":last")):n=this._tabNext(t,a,!0):(d=this._horizontalContainer(d),n=this._prevHorizontalCell(d,t,i),n[0]!==t[0]&&fe(d.parent(),!0))),this._setCurrent(n)),!0},_moveRight:function(t,r,l,o,a){var n,i,s=t.parent(),d=s.parent();return r?this.expandRow(s):o&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!1):(i=d.find(Je).index(s),n=this._nextHorizontalCell(d,t,i),n[0]||(l?this.lockedTable?(n=this._relatedRow(s),e.contains(this.table[0],s[0])&&(n=n.nextAll(Xe+":first")),n=n.children($e+":first")):n=this._tabNext(t,a,!1):(d=this._horizontalContainer(d,!0),n=this._nextHorizontalCell(d,t,i),n[0]!==t[0]&&fe(d.parent(),!0))),this._setCurrent(n)),!0},_moveUp:function(e,t){var r,l,o=e.parent().parent();return t?(r=e.parent(),r=r.prevAll(Xe+":first"),r=e.parent().is(Xe)?r.children().eq(e.index()):r.children($e+":last")):(r=this._prevVerticalCell(o,e),r[0]||(this._lastCellIndex=0,o=this._verticalContainer(o,!0),r=this._prevVerticalCell(o,e),r[0]&&fe(o.parent(),!0))),l=this._lastCellIndex||0,this._setCurrent(r),this._lastCellIndex=l,!0},_moveDown:function(e,t){var r,l,o=e.parent().parent();return t?(r=e.parent(),r=r.nextAll(Xe+":first"),r=e.parent().is(Xe)?r.children().eq(e.index()):r.children($e+":first")):(r=this._nextVerticalCell(o,e),r[0]||(this._lastCellIndex=0,o=this._verticalContainer(o),r=this._nextVerticalCell(o,e),r[0]&&fe(o.parent(),!0))),l=this._lastCellIndex||0,this._setCurrent(r),this._lastCellIndex=l,!0},_moveColumn:function(t,r){var l=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),o=v(L(this.columns)),a=l.index(e(t)),n=r?-1:1,i=o[a],s=D(o,this.columns,a,a+n);s>=0&&this.reorderColumn(s,i,r)},_handleHome:function(e,t){var r,l=e.parent(),o=l.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===o[0],n=o[0]===this.tbody[0];if(t?r=this.lockedTable?this.lockedTable.find(Ze+">"+Ye+":first"):this.table.find(Ze+">"+Ye+":first"):(n||a)&&(n&&this.lockedTable&&(l=this._relatedRow(l)),r=l.children($e+":first")),r&&r.length)return this._setCurrent(r),!0},_handleEnd:function(e,t){var r,l=e.parent(),o=l.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===o[0],n=o[0]===this.tbody[0];if(t?r=this.table.find(et+">"+Ye+":last"):(n||a)&&(!n&&this.lockedTable&&(l=this._relatedRow(l)),r=l.children($e+":last")),r&&r.length)return this._setCurrent(r),!0},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,r,l){var o,a=this.options.editable&&"incell"==this._editMode();return!(!a||t.is("th"))&&(o=e(Ie()).closest(".k-edit-cell"),o[0]&&o[0]!==t[0]&&(t=o),o=this._tabNext(t,r,l),!!o.length&&(this._handleEditing(t,o,o.closest("table")),!0))},_handleEscKey:function(t,r){var l,o=Ie(),a="incell"==this._editMode();return _e(t)?(a?this.closeCell(!0):(l=e(t).parent().index(),o&&o.blur(),this.cancelRow(!0),l>=0&&this._setCurrent(this.items().eq(l).children(Ye).first())),gr.msie&&gr.version<9&&document.body.focus(),fe(r,!0),!0):!!t.has(o).length&&(fe(r,!0),!0)},_toggleCurrent:function(e,t){var r=e.parent();return r.is(".k-grouping-row")?(r.find(".k-icon:first").click(),!0):!(t||!r.is(".k-master-row"))&&(r.find(".k-icon:first").click(),!0)},_handleEnterKey:function(t,r,l){var o,a,n=this.options.editable&&this.options.editable.update!==!1,i=l.closest("[role=gridcell]");return l.is("table")||e.contains(t[0],l[0])||(t=i),t.is("th")?(o=t.find(".k-link"),o.length?o.click():t.find(Mt).focus(),!0):!!this._toggleCurrent(t,n)||(a=t.find(":kendoFocusable:first"),a[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(a.focus(),!0):!(!n||l.is(":button,.k-button,textarea"))&&(i[0]||(i=t),this._handleEditing(i,!1,r),!0))},_nextHorizontalCell:function(e,t,r){var l,o,a,n=t.nextAll($e);return n.length||(l=e.find(Je),o=l.index(t.parent()),o!=-1)?n.first():t.hasClass("k-header")?(a=[],B([N(this.columns)[0]],J(l.eq(0).children(":visible").first()),a,0,0),a[r]?a[r][0]:t):t.parent().hasClass("k-filter-row")?l.last().children($e).first():l.eq(r).children($e).first()},_prevHorizontalCell:function(e,t,r){var l,o,a,n,i=t.prevAll($e);return i.length||(l=e.find(Je),o=l.index(t.parent()),o!=-1)?i.first():t.hasClass("k-header")?(a=[],n=N(this.columns),B([n[n.length-1]],J(l.eq(0).children().last()),a,0,0),a[r]?a[r][0]:t):t.parent().hasClass("k-filter-row")?l.last().children($e).last():l.eq(r).children($e).last()},_currentDataIndex:function(e,r){var l,o=r.attr("data-index");return o?(l=N(this.columns).length,l&&!e.closest("div").hasClass("k-grid-content-locked")[0]?o-l:o):t},_prevVerticalCell:function(t,r){var l,o=r.parent(),a=t.children(Je),n=a.index(o),i=this._currentDataIndex(t,r);if(i||r.hasClass("k-header"))return l=Q(r),l.eq(l.length-2);if(i=Math.max(o.children($e).index(r),this._lastCellIndex||0),o.hasClass("k-filter-row"))return $(t).filter(b).eq(i);if(n==-1){if(o=t.find("tr.k-filter-row:visible"),!o[0])return $(t).filter(b).eq(i)}else o=0===n?e():a.eq(n-1);return l=o.children($e),l.eq(l.length>i?i:0)},_nextVerticalCell:function(e,r){var l,o,a,n,i,s,d=r.parent(),c=e.children(Je),u=c.index(d),p=this._currentDataIndex(e,r);if(u!=-1&&p===t&&r.hasClass("k-header"))return J(r).eq(1);if(p=p?parseInt(p,10):d.children($e).index(r),p=Math.max(p,this._lastCellIndex||0),d=c.eq(u==-1?0:u+r[0].rowSpan),o=p,this._currentDataIndex(e,r)!==t)for(a=d.children(":not(.k-group-cell):not(.k-hierarchy-cell)"),n=a.filter(":hidden"),i=0,s=n.length;i<s;i++)a.index(n[i])<p&&o--;return p=o,l=d.children($e),l.eq(l.length>p?p:0)},_verticalContainer:function(e,t){var r=e.parent(),l=this._navigatableTables.length,o=Math.floor(l/2),a=Pe(r[0],this._navigatableTables);return t&&(o*=-1),a+=o,(a>=0||a<l)&&(r=this._navigatableTables.eq(a)),r.find(t?"thead":"tbody")},_horizontalContainer:function(e,t){var r,l,o=this._navigatableTables.length;return o<=2?e:(r=e.parent(),l=Pe(r[0],this._navigatableTables),l+=t?1:-1,!t||2!=l&&l!=o?!t&&(1==l||l<0)?e:this._navigatableTables.eq(l).find("thead, tbody"):e)},_tabNext:function(e,t,r){var l=!0,o=r?e.prevAll($e+":first"):e.nextAll(":visible:first");return o.length||(o=e.parent(),this.lockedTable&&(l=r&&t==this.lockedTable[0]||!r&&t==this.table[0],o=this._relatedRow(o)),l&&(o=o[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),o=o.children($e+(r?":last":":first"))),o},_handleEditing:function(r,l,o){var a,n,i=this,s=e(Ie()),d=i._editMode(),c=gr.msie,u=c&&gr.version<9,p=i._editContainer,h=i.options.editable&&i.options.editable.update!==!1;if(o=e(o),n="incell"==d?r.hasClass("k-edit-cell"):r.parent().hasClass("k-grid-edit-row"),i.editable){if(e.contains(p[0],s[0])&&(gr.opera||u?s.blur().change().triggerHandler("blur"):(s.blur(),c&&s.blur())),!i.editable)return fe(o),t;if(!i.editable.end())return i._setCurrent("incell"==d?p:p.children().filter($e).first()),a=p.find(":kendoFocusable:first")[0],a&&a.focus(),t;"incell"==d?i.closeCell():(i.saveRow(),n=!0)}l&&i._setCurrent(l),u&&document.body.focus(),fe(o,!0),h&&(!n&&!l||l)&&("incell"==d?i.editCell(i.current()):i.editRow(i.current().parent()))},_wrapper:function(){var e=this,t=e.table,r=e.options.height,l=e.element;l.is("div")||(l=l.wrap("<div/>").parent()),e.wrapper=l.addClass("k-grid k-widget k-display-block"),r&&(e.wrapper.css(Bt,r),t.css(Bt,"auto")),e._initMobile()},_initMobile:function(){var t,r=this.options,l=this;this._isMobile=r.mobile===!0&&Se.support.mobileOS||"phone"===r.mobile||"tablet"===r.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+Se.ns+'stretch="true" data-'+Se.ns+'role="view" data-'+Se.ns+'init-widgets="false"></div>').parent(),this.pane=Se.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},r.height&&this.pane.element.parent().css(Bt,r.height),this._editAnimation="slide",this.view.bind("show",function(){l._isLocked()&&(l._updateTablesWidth(),l._applyLockedContainersWidth(),l._syncLockedContentHeight(),l._syncLockedHeaderHeight(),l._syncLockedFooterHeight())}))},_tbody:function(){var t,r=this,l=r.table;t=l.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(l)),r.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,r,l,o,a,n,i,s=this,d=s.options,c=d.scrollable,u=c!==!0&&c.virtual&&!s.virtualScrollable,p=!Se.support.kineticScrollNeeded||u?Se.support.scrollbar():0;c&&(t=s.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(s.table)),t.css(fr?"padding-left":"padding-right",c.virtual?p+1:p),r=e('<table role="grid" />'),mr&&r.attr("cellspacing",0),r.width(s.table[0].style.width),r.append(s.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r)),s.content=s.table.parent(),s.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(s.content=s.content.parent()),s.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(s.content=s.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),u&&s._createVirtualScrollable(),l=t.children(".k-grid-header-wrap"),s.scrollables=l.add(s.content),o=s.wrapper.find(".k-grid-footer"),o.length&&(s.scrollables=s.scrollables.add(o.children(".k-grid-footer-wrap"))),l.unbind("scroll"+lt).bind("scroll"+lt,function(e){s._scrollLeft!==this.scrollLeft&&s.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft)}),c.virtual?s.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+lt).bind("scroll"+lt,function(){s.scrollables.scrollLeft(this.scrollLeft),s.lockedContent&&(s.lockedContent[0].scrollTop=this.scrollTop)}):(a=c.endless,n=s.dataSource.options.pageSize,a&&(s._endlessPageSize=n),s.content.unbind("scroll"+lt).bind("scroll"+lt,function(e){s._scrollLeft=this.scrollLeft,s.scrollables.not(e.currentTarget).scrollLeft(s._scrollLeft),s.lockedContent&&e.currentTarget==s.content[0]&&(s.lockedContent[0].scrollTop=this.scrollTop),a&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!s._endlessFetchInProgress&&s._endlessPageSize<s.dataSource.total()&&(s._skipRerenderItemsCount=s._endlessPageSize,s._endlessPageSize=s._endlessPageSize+n,s.dataSource.options.endless=!0,s._endlessFetchInProgress=!0,s.dataSource.pageSize(s._endlessPageSize))}),i=s.content.data("kendoTouchScroller"),i&&i.destroy(),i=Se.touchScroller(s.content),i&&i.movable&&(s.touchScroller=i,i.movable.bind("change",function(e){s.scrollables.scrollLeft(-e.sender.x),s.lockedContent&&s.lockedContent.scrollTop(-e.sender.y)}),s.one(vt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new _r(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()}}),e.virtualScrollable.bind(Tt,Be(e._onVirtualPaging,e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===Jt},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===Qt},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,l,o=this,a=o._editableState||{},n=a.model,i=o.dataSource,s=o._isVirtualInlineEditable(),d=o._isVirtualIncellEditable();(s||d)&&n&&i._getByUid(n.uid,i.view())&&(s?(o._shouldClearEditableState=!1,o.editRow(n),o._focusEditable()):d&&(t=o.tbody.children(r(Yt,n.uid)),l=e(t).children(r(Ut,a.field)),l[0]&&(o._shouldClearEditableState=!1,o.editCell(l),o._focusEditable()))),o._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,l=e._editContainer;l&&!Ge(l[0],Ie())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()?l.find(r(jt,t)).find(It).eq(0).focus():e._isVirtualIncellEditable()&&l.find(It).eq(0).focus())},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable())&&e.virtualScrollable._isElementVisible(e._editContainer)},_cacheEditableState:function(){var t,r,l=this,o=l._editContainer,a=o?l._modelForContainer(o):null,n=l._isVirtualInlineEditable(),i=l._isVirtualIncellEditable();(n||i)&&a&&(l._clearEditableState(),t=e(Ie()),o&&t[0]&&Ge(o[0],t[0])&&(t.change(),r=Se.widgetInstance(t,Se.ui),r&&Ne(r.value)&&t.is($t)&&(r.value(t.val()),r.trigger(mt))),n?l._editableState={model:a,field:t.closest("["+Se.attr(jt)+"]").attr(Se.attr(jt))}:i&&(l._editableState={model:a,field:o.attr(Se.attr(Ut))}))},_clearEditableState:function(){var e=this;e.virtualScrollable&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_renderNoRecordsContent:function(){var t,r=this;r.options.noRecords&&(t=r.table.parent().children("."+Lt),t.length&&(r.angular("cleanup",function(){return{elements:t.get()}}),t.remove()),r.dataSource&&r.dataSource.view().length||(t=e(r.noRecordsTemplate({})).insertAfter(r.table),r.angular("compile",function(){return{elements:t.get(),data:[{}]}})))},_setContentWidth:function(t){var r,l=this,o="k-grid-content-expander",a='<div class="'+o+'"></div>',n=l.resizable;l.options.scrollable&&l.wrapper.is(":visible")&&(r=l.table.parent().children("."+o),l._setContentWidthHandler=Be(l._setContentWidth,l),l.dataSource&&l.dataSource.view().length?r[0]&&(r.remove(),n&&n.unbind("resize",l._setContentWidthHandler)):(r[0]||(r=e(a).appendTo(l.table.parent()),n&&n.bind("resize",l._setContentWidthHandler)),l.thead&&(r.width(l.thead.width()),isNaN(parseFloat(t,10))||l.content.scrollLeft(t))),l._applyLockedContainersWidth(),l._syncLockedContentHeight(),l.lockedHeader&&0===l.table[0].clientWidth&&(l.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),r=t.parent(),l=this.wrapper[0].clientWidth,o=this._groups(),a=Se.support.scrollbar(),n=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),i=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=W(n),d=W(i);o>0&&(s+=Ee(this.lockedHeader.find(".k-group-cell:first"))*o),s>=l&&(s=l-3*a),this.lockedHeader.add(this.lockedContent).width(s),r[0].style.width=r.parent().width()-s-2+"px",t.add(this.table).width(d),this.virtualScrollable&&!kr&&(l-=a),this.content[0].style.width=l-s-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(s),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=r[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e,r=this,l=r.options,o=r.wrapper.innerHeight(),a=r.wrapper.children(".k-grid-header"),n=Se.support.scrollbar(),i=(l.scrollable||{}).height;if(l.scrollable&&r.wrapper.is(":visible")){if(o-=Me(a),r.pager&&r.pager.element.is(":visible")&&(o-=Me(r.pager.element)),l.groupable&&(o-=Me(r.wrapper.children(".k-grouping-header"))),l.toolbar&&(o-=Me(r.wrapper.children(".k-grid-toolbar"))),r.footerTemplate&&(o-=Me(r.wrapper.children(".k-grid-footer"))),""===r.wrapper[0].style.height&&i)return r.content[0].style.height=i,t;e=function(e){var t,r;return!!e[0].style.height||(t=e.height(),e.height("auto"),r=e.height(),t!=r?(e.height(""),!0):(e.height(""),!1))},e(r.wrapper)&&(o>2*n?(r.lockedContent&&(n=r.table[0].offsetWidth>r.table.parent()[0].clientWidth?n:0,r.lockedContent.height(o-n)),r.content.height(o)):r.content.height(2*n+1))}},_averageRowHeight:function(){var e,t=this,r=t._items(t.tbody).length,l=t._rowHeight;return 0===r?l:(t._rowHeight||(t._rowHeight=l=Me(t.table)/r,t._sum=l,t._measures=1),
e=Me(t.table)/r,l!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),l)},_dataSource:function(){var e,r=this,l=r.options,o=l.dataSource;o=qe(o)?{data:o}:o,De(o)&&(Fe(o,{table:r.table,fields:r.columns}),e=l.pageable,De(e)&&e.pageSize!==t&&(o.pageSize=e.pageSize)),r.dataSource&&r._refreshHandler?r.dataSource.unbind(mt,r._refreshHandler).unbind(je,r._progressHandler).unbind(Ue,r._errorHandler):(r._refreshHandler=Be(r.refresh,r),r._progressHandler=Be(r._requestStart,r),r._errorHandler=Be(r._error,r)),r.dataSource=xe.create(o).bind(mt,r._refreshHandler).bind(je,r._progressHandler).bind(Ue,r._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var r,l,o,a,n,i,s,d,c,u,p=this,h=p.tbody,f=t.model,g=p.tbody.find("tr["+Se.attr("uid")+"="+f.uid+"]"),m=g.hasClass("k-alt"),b=p._items(h).index(g),k=p.lockedContent;if(k&&(r=p._relatedRow(g)),g.add(r).children(".k-edit-cell").length&&!p.options.rowTemplate)g.add(r).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){l=e(this),o=U(p.columns)[p.cellIndex(l)],o.field===t.field&&(l.hasClass("k-edit-cell")?l.addClass("k-dirty-cell"):p._displayCell(l,o,f))});else if(!g.hasClass("k-grid-edit-row")){for(i=e().add(g),k&&(a=(m?p.lockedAltRowTemplate:p.lockedRowTemplate)(f),i=i.add(r),r.replaceWith(a)),p.angular("cleanup",function(){return{elements:i.get()}}),a=(m?p.altRowTemplate:p.rowTemplate)(f),g.replaceWith(a),a=p._items(h).eq(b),u=[{dataItem:f}],k&&(g=g.add(r),r=p._relatedRow(a)[0],pe(a[0],r),a=a.add(r),u.push({dataItem:f})),p.angular("compile",function(){return{elements:a.get(),data:u}}),n=p.options.selectable,(n||p._checkBoxSelection)&&g.hasClass("k-state-selected")&&p.select(a),d=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),s=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),b=0,c=p.columns.length;b<c;b++)o=p.columns[b],l=s.eq(b),n&&d.eq(b).hasClass("k-state-selected")&&l.addClass("k-state-selected");p.trigger("itemChange",{item:a,data:f,ns:Te})}},_pageable:function(){var t,r=this,l=r.options.pageable;l&&(t=r.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(r.wrapper)),r.pager&&r.pager.destroy(),r.pager="object"==typeof l&&l instanceof Se.ui.Pager?l:new Se.ui.Pager(t,Fe({},l,{dataSource:r.dataSource})),r.pager.bind("pageChange",function(e){r.trigger("page",{page:e.index})&&e.preventDefault()}))},_footer:function(){var t,r,l,o=this,a=o.dataSource.aggregates(),n="",i=o.footerTemplate,s=o.options,d=o.footer||o.wrapper.find(".k-grid-footer");i?(n=e(o._wrapFooter(i(a))),d.length?(r=n,o.angular("cleanup",function(){return{elements:d.get()}}),d.replaceWith(r),d=o.footer=r):d=o.footer=s.scrollable?s.pageable?n.insertBefore(o.wrapper.children("div.k-grid-pager")):n.appendTo(o.wrapper):n.insertBefore(o.tbody),o.angular("compile",function(){return{elements:d.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:Ae(o.columns,function(e){return{column:e,aggregate:a[e.field]}})}})):d&&!o.footer&&(o.footer=d),d.length&&(s.scrollable&&(t=d.attr("tabindex",-1).children(".k-grid-footer-wrap"),o.scrollables=e(o.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).toArray()).add(t)),o._footerWidth&&d.find("table").css("width",o._footerWidth),t&&(l=o.content.scrollLeft(),s.scrollable!==!0&&s.scrollable.virtual&&(l=o.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(l))),o.lockedContent&&(o._appendLockedColumnFooter(),o._applyLockedContainersWidth(),o._syncLockedFooterHeight())},_wrapFooter:function(t){var r=this,l="",o=Se.support.mobileOS?0:Se.support.scrollbar();return r.options.scrollable?(l=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(mr?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),r._appendCols(l.find("table")),l.css(fr?"padding-left":"padding-right",o),l):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,r,l,o,a,n,i,s,d,c=this,u=U(c.columns),p=c.options,h=p.columnMenu,f=We(c.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){c.trigger(pt,{field:e.field,container:e.container})},b=function(e){c.trigger(ft,{field:e.field,container:e.container})},k=function(e){fe(e.closest("table"),!0)},_=function(e){c.trigger("sort",{sort:e.sort})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},v=function(e){c.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},w=p.$angular;if(h)for("boolean"==typeof h&&(h={}),c._setColumnsMediaVisibility(u),n=$(c.thead),i=0,s=n.length;i<s;i++)r=u[i],d=n.eq(i),r.command||!r.field&&!d.attr("data-"+Se.ns+"field")||(e=d.data("kendoColumnMenu"),e&&e.destroy(),o=r.sortable!==!1&&h.sortable!==!1&&p.sortable!==!1&&Fe({},p.sortable,{compare:(r.sortable||{}).compare}),a=!(!p.filterable||r.filterable===!1||h.filterable===!1)&&Fe({pane:c.pane},p.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(a.forceUnique=!1,a.checkSource=r.filterable.dataSource),a&&(a.format=r.format),l={dataSource:c.dataSource,values:r.values,columns:h.columns,sortable:o,filterable:a,messages:h.messages,owner:c,closeCallback:k,init:m,open:b,pane:c.pane,sort:_,filtering:v,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&r.lockable!==!1&&N(u).length>0},w&&(l.$angular=w),d.kendoColumnMenu(l))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,r,l,o,a,n,i=this,s=U(i.columns),d=function(e){i.trigger(ut,{field:e.field,container:e.container})},c=function(e){fe(e.closest("table"),!0)},u=function(e){i.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(i._clearEditableState(),i.dataSource.options.endless&&(i.dataSource.options.endless=null,i._endlessPageSize=i.dataSource.options.pageSize,i.dataSource.pageSize(i.dataSource.options.pageSize)))},p=function(e){i.trigger(ht,{field:e.field,container:e.container})},h=i.options.filterable;if(h&&typeof h.mode==Gt&&h.mode.indexOf("menu")==-1&&(h=!1),h&&!i.options.columnMenu)for(t=$(i.thead),l=0,o=t.length;l<o;l++)r=t.eq(l),s[l].filterable===!1||s[l].command||!s[l].field&&!r.attr("data-"+Se.ns+"field")||(e=r.data("kendoFilterMenu"),e&&e.destroy(),e=r.data("kendoFilterMultiCheck"),e&&e.destroy(),a=s[l].filterable,n=Fe({},h,a,{dataSource:i.dataSource,values:s[l].values,format:s[l].format,closeCallback:c,title:s[l].title||s[l].field,init:d,open:p,pane:i.pane,change:u}),a&&a.messages&&(n.messages=Fe(!0,{},h.messages,a.messages)),a&&a.dataSource&&(n.forceUnique=!1,n.checkSource=a.dataSource),a&&a.multi?r.kendoFilterMultiCheck(n):r.kendoFilterMenu(n))},_filterRow:function(){var t,r,l,o,a,n,i,s,d,c,u,p,h,f,g,m=this;if(m._hasFilterRow())for(r=m.options.$angular,l=U(m.columns),o=m.options.filterable,a=m.thead.find(".k-filter-row"),n=function(e){m.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(m._clearEditableState(),m.dataSource.options.endless&&(m.dataSource.options.endless=null,m._endlessPageSize=m.dataSource.options.pageSize,m.dataSource.pageSize(m.dataSource.options.pageSize)))},this._updateHeader(this.dataSource.group().length),i=0;i<l.length;i++)if(d=l[i],c=m.options.filterable.operators,u=!1,p=e("<th/>"),h=d.field,d.hidden&&p.hide(),a.append(p),h&&d.filterable!==!1){if(f=d.filterable&&d.filterable.cell||{},s=m.options.dataSource,s instanceof xe&&(s=m.options.dataSource.options),g=Fe(!0,{},o.messages),d.filterable&&Fe(!0,g,d.filterable.messages),f.enabled===!1){p.html("&nbsp;");continue}f.dataSource&&(s=f.dataSource,u=!0),d.filterable&&d.filterable.operators&&(c=d.filterable.operators),t={column:d,dataSource:m.dataSource,suggestDataSource:s,customDataSource:u,field:h,messages:g,values:d.values,template:f.template,delay:f.delay,inputWidth:f.inputWidth,suggestionOperator:f.suggestionOperator,minLength:f.minLength,dataTextField:f.dataTextField,operator:f.operator,operators:c,showOperators:f.showOperators,change:n},r&&(t.$angular=r),e("<span/>").attr(Se.attr("field"),h).appendTo(p).kendoFilterCell(t)}else p.html("&nbsp;")},_sortable:function(){var e,t,r,l,o,a,n=this,i=U(n.columns),s=n.options.sortable,d=function(e){n.trigger("sort",{sort:e.sort})?e.preventDefault():n._clearEditableState()};if(s){for(l=$(n.thead),o=0,a=l.length;o<a;o++)e=i[o],e.sortable!==!1&&!e.command&&e.field&&(r=l.eq(o),t=r.data("kendoColumnSorter"),t&&t.destroy(),r.attr("data-"+Se.ns+"field",e.field).kendoColumnSorter(Fe({},s,e.sortable,{dataSource:n.dataSource,aria:!0,filter:":not(.k-column-active)",change:d})));l=null}},_columns:function(t){var r,l,o,a,n=this,i=n.table,s=i.find("col"),c=n.element.find("thead:first th[data-index]"),u=n.options.dataSource;if(t=t.length?t:Ae(i.find("th"),function(t,r){t=e(t);var l=t.attr(Se.attr("sortable")),o=t.attr(Se.attr("filterable")),a=t.attr(Se.attr("type")),n=t.attr(Se.attr("groupable")),i=t.attr(Se.attr("field")),d=t.attr(Se.attr("title")),c=t.attr(Se.attr("menu"));return i||(i=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:i,type:a,title:d,sortable:"false"!==l,filterable:"false"!==o,groupable:"false"!==n,menu:c,template:t.attr(Se.attr("template")),width:s.eq(r).css("width")}}),r=!(n.table.find("tbody tr").length>0&&(!u||!u.transport)),n.options.scrollable){if(a=t,l=N(t),t=O(t),l.length>0&&0===t.length)throw Error("There should be at least one non locked column");te(n.element.find("tr:has(th):first"),a),t=l.concat(t)}n.columns=d(t,r),c.length&&n.columns.length&&(o=U(n.columns),Ae(c,function(t){var r,l;t=e(t),r=t.attr("id"),l=Se.parseInt(t.attr("data-index")),r&&(o[l].headerAttributes=Fe(o[l].headerAttributes,{id:r}))})),e.grep(U(n.columns),function(e){return e.selectable}).length&&(n._selectedIds={},n._checkBoxSelection=!0,n.wrapper.on(Vt+lt,"tbody > tr "+Mt,Be(n._checkboxClick,n)),n.wrapper.on(Vt+lt,"thead > tr "+Mt,Be(n._headerCheckboxClick,n)))},_headerCheckboxClick:function(t){var r=this,l=e(t.target),o=l.prop("checked"),a=l.closest(".k-grid.k-widget").getKendoGrid();r===a&&(o?r.select(a.items()):r.clearSelection())},_checkboxClick:function(t){var r=this,l=e(t.target).closest("tr"),o=!l.hasClass(zt);r===l.closest(".k-grid.k-widget").getKendoGrid()&&(o?r.select(l):r._deselectCheckRows(l))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,r,a,n){var i,s,d,c,u,p=this,h=Fe({},Se.Template,p.options.templateSettings),f=h.paramName,g=r.length,m={storage:{},count:0},b=p._hasDetails(),k=[],_=p._groups(),v=p.options.navigatable,w=Se.attr("field"),C="";if(!e){for(e="<tr",a&&k.push("k-alt"),b&&k.push("k-master-row"),k.length&&(e+=' class="'+k.join(" ")+'"'),g&&(e+=" "+Se.attr("uid")+'="#='+Se.expr("uid",h.paramName)+'#"'),e+=" role='row'>",_>0&&!n&&(e+=l(_)),b&&(e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+ar+'="'+or+'" tabindex="-1"></a></td>'),i=0;i<g;i++)d=r[i],s=d.template,c=typeof s,u=d.field,p._editMode()===Qt&&u&&(d.attributes=d.attributes||{},p.virtualScrollable&&(d.attributes[w]=u),C=p._dirtyCellTemplate(u,f),d.attributes["class"]=d.attributes["class"]||"",d.attributes["class"].indexOf(C)<0&&(d.attributes["class"]+=C)),d.command&&(d.attributes=d.attributes||{},t!==d.attributes["class"]?d.attributes["class"]+=" k-command-cell":d.attributes["class"]="k-command-cell"),e+="<td"+o(d.attributes),v&&(e+=" aria-describedby='"+d.headerAttributes.id+"'"),e+=" role='gridcell'>",e+=p._cellTmpl(d,m),e+="</td>";e+="</tr>"}return e=Se.template(e,h),m.count>0?Be(e,m.storage):e},_dirtyCellTemplate:function(e,t){var r;return e&&t?(r="["===e.charAt(0)?Se.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+r+" ? ' k-dirty-cell' : '' #"):""},_headerCellText:function(e){var t=this,r=Fe({},Se.Template,t.options.templateSettings),l=e.headerTemplate,o=typeof l,a=e.title||e.field||"";return o===Ot?a=Se.template(l,r)({}):o===Gt&&(a=l),a},_cellTmpl:function(e,t){var r,l,o=this,a=Fe({},Se.Template,o.options.templateSettings),n=e.template,i=a.paramName,s=e.field,d="",c=e.format,u=typeof n,p=e.values;if(e.command){if(qe(e.command)){for(r=0,l=e.command.length;r<l;r++)d+=e.command[r].visible?Se.format("#= {0}(data)? '{1}':'' #",e.command[r].visible,o._createButton(e.command[r]).replace(ir,"\\#")):o._createButton(e.command[r]).replace(ir,"\\#");return d}return o._createButton(e.command).replace(ir,"\\#")}return e.selectable?pr:(d+=o._dirtyIndicatorTemplate(s,i),u===Ot?(t.storage["tmpl"+t.count]=n,d+="#=this.tmpl"+t.count+"("+i+")#",t.count++):u===Gt?d+=n:p&&p.length&&De(p[0])&&"value"in p[0]&&s?(d+="#var v ="+Se.stringify(re(p)).replace(ir,"\\#")+"#",d+="#var f = v[",a.useWithBlock||(d+=i+"."),d+=s+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(nr,"\\$1")+'",'),s?(s=Se.expr(s,i),d+=s+"==null?'':"+s):d+="''",c&&(d+=")"),d+="#"),d)},_dirtyIndicatorTemplate:function(e,t){var r;return e&&t?(r="["===e.charAt(0)?Se.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+r+" ? '<span class=\"k-dirty\"></span>' : '' #"):""},_templates:function(){var t=this,r=t.options,l=t.dataSource,o=l.group(),a=t.footer||t.wrapper.find(".k-grid-footer"),n=l.aggregate(),i=U(t.columns),s=U(N(t.columns)),d=r.scrollable?U(O(t.columns)):i,c=We(v(s),function(e,t){return e.groupHeaderColumnTemplate&&0!==t}),u=We(v(d),function(e){return e.groupHeaderColumnTemplate});if(r.scrollable&&s.length){if(r.rowTemplate||r.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(r.rowTemplate,d,!1,!0),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,d,!0,!0),t.lockedRowTemplate=t._tmpl(r.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(r.rowTemplate,d),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,d,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(r.detailTemplate||"")),(t._group&&!Oe(n)||!Oe(n)&&!a.length||We(i,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(i,n,"footerTemplate","k-footer-template")),o&&We(i,function(e){return e.groupFooterTemplate}).length&&(n=e.map(o,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(d,n,"groupFooterTemplate","k-group-footer",s.length),r.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,n,"groupFooterTemplate","k-group-footer"))),o&&(c.length||u.length)?(n=e.map(o,function(e){return e.aggregates}),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(v(d),n,"groupHeaderColumnTemplate","k-grouping-row",s.length,u),r.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(v(s),n,"groupHeaderColumnTemplate","k-grouping-row",0,c))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,r,l,o='<div class="{0}">{1}</div>',a='<div class="k-grid-norecords-template"{1}>{0}</div>',n=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",i={storage:{},count:0},s=e.extend({},Se.Template,this.options.templateSettings),d=s.paramName,c="";return t=this.options.noRecords.template?this.options.noRecords.template:Se.format(a,this.options.messages.noRecords,n),r=typeof t,"function"===r?(i.storage["tmpl"+i.count]=t,c+="#=this.tmpl"+i.count+"("+d+")#",i.count++):"string"===r&&(c+=t),l=Se.template(Se.format(o,Lt,c),s),i.count>0&&(l=e.proxy(l,i.storage)),l},_footerTmpl:function(e,t,r,a,n){var i,s,d,c,u,p=this,h=Fe({},Se.Template,p.options.templateSettings),f=h.paramName,g="",m={},b=0,k={},_=p._groups(),v=p.dataSource._emptyAggregates(t);for(g+='<tr class="'+a+'">',_>0&&!n&&(g+=l(_)),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),i=0,s=e.length;i<s;i++)u=e[i],d=u[r],c=typeof d,g+="<td"+o(u.footerAttributes)+">",d?(c!==Ot&&(k=v[u.field]?Fe({},h,{paramName:f+"['"+u.field+"']"}):{},d=Se.template(d,k)),m["tmpl"+b]=d,g+="#=this.tmpl"+b+"("+f+")#",b++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=Se.template(g,h),b>0?Be(g,m):g},_groupHeaderTmpl:function(e,r,l,o,a,n){var i,s,d,c,u,p=this,h=Fe({},Se.Template,p.options.templateSettings),f=h.paramName,g="",m={},b=0,k={},_=p.dataSource._emptyAggregates(r),v=n.length?Pe(n[0],e):-1;if(g+='<tr role="row" class="'+o+'">',a||(g+='# for (var i = 0; i < data.groupCells; i++) { #<td class="k-group-cell">&nbsp;</td># } #'),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),v<0)return g+=a?"":ve(e.length),t;if(v<Xt&&n.length<=1&&!a)return g+=a?"":ve(e.length),Se.template(g,h);for(v<Xt?(v=a?0:1,g+=a?"":ve(v)):g+=a?we(v):ve(v),i=v,s=e.length;i<s;i++)u=e[i],d=u[l],c=typeof d,g+="<td>",d?(c!==Ot&&(k=_[u.field]?Fe({},h,{paramName:f+"['"+u.field+"']"}):{},d=Se.template(d,k)),m["tmpl"+b]=d,g+="#=this.tmpl"+b+"("+f+")#",b++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=Se.template(g,h),b>0?Be(g,m):g},_detailTmpl:function(e){var t=this,r="",o=Fe({},Se.Template,t.options.templateSettings),a=o.paramName,n={},i=0,s=t._groups(),d=v(U(t.columns)).length,c=typeof e;return r+='<tr class="k-detail-row">',s>0&&(r+=l(s)),r+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===Ot?(n["tmpl"+i]=e,r+="#=this.tmpl"+i+"("+a+")#",i++):r+=e,r+="</td></tr>",r=Se.template(r,o),i>0?Be(r,n):r},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[ct]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,r=t&&typeof t.mode==Gt&&t.mode.indexOf("row")!=-1,l=this.columns,o=e.grep(l,function(e){return e.filterable===!1});return l.length&&o.length==l.length&&(r=!1),r},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&N(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(Vt+lt,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(r){var l,o,a=e(this),n=a.closest("td.k-hierarchy-cell"),i=a.hasClass("k-i-expand"),s=a.closest("tr.k-master-row"),d=t.detailTemplate,c=t._hasDetails(),u=i?lr:or,p=!!i;return a.toggleClass("k-i-expand",!i).toggleClass("k-i-collapse",i).attr(ar,u),n.attr("aria-expanded",p),l=s.next(),c&&!l.hasClass("k-detail-row")&&(o=t.dataItem(s),l=e(d(o)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:l.get(),data:[{dataItem:o}]}}),t.trigger(ct,{masterRow:s,detailRow:l,data:o,detailCell:l.find(".k-detail-cell")})),t.trigger(i?wt:Ct,{masterRow:s,detailRow:l}),l.toggle(i),r.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var r,l,o=this.tbody.children(),a=/k-grouping-row|k-detail-row|k-group-footer/,n=t.sectionRowIndex;for(l=n,r=0;r<n;r++)a.test(o[r].className)&&l--;return this._data[l]},expandRow:function(t){e(t).find("> td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-i-collapse").click()},_createHeaderCells:function(e,r){var l,a,n,i,s,d,c=this,u="",p=U(c.columns);for(l=0,i=e.length;l<i;l++)a=e[l].column||e[l],n=c._headerCellText(a),s="",d=Pe(a,p),a.selectable?(u+="<th scope='col'"+o(a.headerAttributes),r&&!e[l].colSpan&&(u+=" rowspan='"+r+"'"),d>-1&&(u+=Se.attr("index")+"='"+d+"'"),n=a.headerTemplate?n:Se.template(hr)({}),u+=">"+n+"</th>"):a.command?(u+="<th scope='col'"+o(a.headerAttributes),r&&!e[l].colSpan&&(u+=" rowspan='"+r+"'"),d>-1&&(u+=Se.attr("index")+"='"+d+"'"),u+=">"+n+"</th>"):(a.field&&(s=Se.attr("field")+"='"+a.field+"' "),u+="<th scope='col' role='columnheader' "+s,u+=" aria-haspopup='true'",r&&!e[l].colSpan&&(u+=" rowspan='"+r+"'"),e[l].colSpan>1&&(u+='colspan="'+(e[l].colSpan-A(a.columns))+'" ',u+=Se.attr("colspan")+"='"+e[l].colSpan+"'"),a.title&&(u+=Se.attr("title")+'="'+a.title.replace('"',"&quot;").replace(/'/g,"'")+'" '),a.groupable!==t&&(u+=Se.attr("groupable")+"='"+a.groupable+"' "),a.aggregates&&a.aggregates.length&&(u+=Se.attr("aggregates")+"='"+a.aggregates+"'"),d>-1&&(u+=Se.attr("index")+"='"+d+"'"),u+=o(a.headerAttributes),u+=">"+n+"</th>");return u},_appendLockedColumnContent:function(){var t,r,l,o,a,n=this.columns,i=this.table.find("colgroup"),s=i.find("col:not(.k-group-col,.k-hierarchy-col)"),d=e(),c=0,u=0;for(t=0,r=n.length;t<r;t++)if(n[t].locked)if(_(n[t])){for(o=1,n[t].columns&&(o=U(n[t].columns).length-A(n[t].columns)),o=o||1,a=0;a<o;a++)d=d.add(s.eq(t+u+a-c));u+=o-1}else c++;l=e('<div class="k-grid-content-locked"><table'+(mr?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),i.detach(),l.find("colgroup").append(d),i.insertBefore(this.table.find("tbody")),this.lockedContent=l.insertBefore(this.content),this.lockedTable=l.children("table")},_appendLockedColumnFooter:function(){var t,r,l=this,o=l.footer,a=o.find(".k-footer-template>td"),n=o.find(".k-grid-footer-wrap>table>colgroup>col"),i=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),s=l._groups(),d=e(),c=e();for(d=d.add(a.filter(".k-group-cell")),t=0,r=U(N(l.columns)).length;t<r;t++)d=d.add(a.eq(t+s));for(c=c.add(n.filter(".k-group-col")),t=0,r=v(U(K(l.columns))).length;t<r;t++)c=c.add(n.eq(t+s));d.appendTo(i.find("tr")),c.appendTo(i.find("colgroup")),l.lockedFooter=i.prependTo(o)},_appendLockedColumnHeader:function(t){var r,l,o,a,n,i,s,d,c,u,p,h=this,f=this.columns,g=[],m=0,b=e(),k=h._hasFilterRow(),v=0,w=e(),C=0,S=e(),T=h.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),x=h.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),H=h.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),R=0;for(r=0,o=f.length;r<o;r++){if(f[r].locked){if(s=x.eq(r),C=U(f[r].columns||[]).length,_(f[r])){for(d=null,f[r].columns&&(d=C-A(f[r].columns)),d=d||1,c=0;c<d;c++)b=b.add(T.eq(r+R+c-m));R+=d-1}for(B([f[r]],J(s),g,0,0),C=C||1,u=0;u<C;u++)w=w.add(H.eq(v+u));v+=C}f[r].columns&&(m+=A(f[r].columns)),_(f[r])||m++}if(g.length){for(l='<div class="k-grid-header-locked" style="width:1px"><table'+(mr?' cellspacing="0"':"")+"><colgroup/><thead>",l+=Array(g.length+1).join("<tr></tr>"),l+=(k?'<tr class="k-filter-row" />':"")+"</thead></table></div>",i=e(l),T=i.find("colgroup"),T.append(h.thead.prev().find("col.k-group-col").add(b)),a=i.find("thead tr:not(.k-filter-row)"),r=0,o=g.length;r<o;r++)S=y(g[r]),a.eq(r).append(h.thead.find("tr:eq("+r+") .k-group-cell").add(S));return p=V(this.thead),g.length<p&&q(i,p-g.length),n=i.find(".k-filter-row"),n.append(h.thead.find(".k-filter-row .k-group-cell").add(w)),this.lockedHeader=i.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);Se.destroy(e),e.off(lt).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,l,o,a,n,i,s=this,d=s.columns,c=s._hasDetails()&&d.length,u=s._hasFilterRow(),p="",h=s.table.find(">thead"),f=s.element.find("thead:first").length>0;if(h.length||(h=e("<thead/>").insertBefore(s.tbody)),s.lockedHeader&&s.thead?(r=s.thead.find("tr:has(th):not(.k-filter-row)").html(""),r.remove(),r=e(),s._removeLockedContainers()):r=s.element.find(f?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!r.length&&(r=h.children().first(),!r.length)){for(l=[{rowSpan:1,cells:[],index:0}],s._prepareColumns(l,d),t=0;t<l.length;t++)p+="<tr>",c&&(p+='<th class="k-hierarchy-cell" scope="col">'+s.options.messages.expandCollapseColumnHeader+"</th>"),p+=s._createHeaderCells(l[t].cells,l[t].rowSpan),p+="</tr>";r=e(p)}u&&(o=e("<tr/>"),o.addClass("k-filter-row"),(c||r.find(".k-hierarchy-cell").length)&&o.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),a=(s.thead||h).find(".k-filter-row"),a.length&&(Se.destroy(a),a.remove()),h.append(o)),r.children().length?c&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'):(p="",c&&(p+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),p+=s._createHeaderCells(d),r.html(p)),r.attr("role","row").find("th").addClass("k-header"),s.options.scrollable||h.addClass("k-grid-header"),r.find("script").remove().end().prependTo(h),s.thead&&s._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:h.find("th").get()}}),this.angular("compile",function(){return{elements:h.find("th").get(),data:Ae(d,function(e){return{column:e}})}}),s.thead=h.attr("role","rowgroup"),s._sortable(),s._filterable(),s._filterRow(),s._scrollable(),s._updateCols(),s._columnMenu(),i=this.options.scrollable&&N(this.columns).length,i&&(n=s._appendLockedColumnHeader(s.thead.closest(".k-grid-header")),s._appendLockedColumnContent(),s.lockedContent.bind("DOMMouseScroll"+lt+" mousewheel"+lt,Be(s._wheelScroll,s))),s._updateColumnCellIndex(),s._updateFirstColumnClass(),s._resizable(),s._draggable(),s._reorderable(),s._updateHeader(s._groups()),i&&(n&&s._syncLockedHeaderHeight(),s._applyLockedContainersWidth()),s.groupable&&s._attachGroupable()},_retrieveFirstColumn:function(t,r){var l,o=e();if(r.length&&t[0]){for(l=t[0];l.columns&&l.columns.length;)l=l.columns[0],r=r.filter(":not(:first())");o=o.add(r)}return o},_updateFirstColumnClass:function(){var t,r,l=this,o=l.columns||[],a=l._hasDetails()&&o.length;a||l._groups()||(t=l.thead.find(">tr:not(.k-filter-row):not(:first)"),o=O(o),r=l._retrieveFirstColumn(o,t),l._isLocked()&&(t=l.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),o=N(l.columns),r=r.add(l._retrieveFirstColumn(o,t))),r.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,r,l){var o,a,n=l||e[e.length-1],i=e[n.index+1],s=0;for(o=0;o<t.length;o++)a={column:t[o],colSpan:0},n.cells.push(a),t[o].columns&&t[o].columns.length&&(i||(i={rowSpan:0,cells:[],index:e.length},e.push(i)),a.colSpan=t[o].columns.length,this._prepareColumns(e,t[o].columns,a,i),s+=a.colSpan-1,n.rowSpan=e.length-n.index);r&&(r.colSpan+=s)},_wheelScroll:function(e){var t,r,l;e.ctrlKey||(t=this.content,this.options.scrollable.virtual&&(t=this.virtualScrollable.verticalScrollbar),r=t.scrollTop(),l=Se.wheelDeltaY(e),l&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&l<0||t[0].scrollTop>0&&l>0)&&e.preventDefault(),t.scrollTop(r+-l)))},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?ee(e,j(G(this.columns)),this._hasDetails(),0):ee(e,j(v(this.columns)),this._hasDetails(),0)},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),ee(e,j(K(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?ee(e,j(G(this.columns)),this._hasDetails(),0):ee(e,j(v(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,l=this;e=e.toJSON(),r=!(l.table.find("tbody tr").length>0&&(!l.dataSource||!l.dataSource.transport));for(t in e)l.columns.push({field:t,encoded:r,headerAttributes:{id:Se.guid()}});l._thead(),l._templates()}},_rowsHtml:function(e,t){var r,l,o=this,a="",n=t.rowTemplate,i=t.altRowTemplate;for(r=0,l=e.length;r<l;r++)o._skipRerenderItemsCount>0?o._skipRerenderItemsCount--:a+=r%2?i(e[r]):n(e[r]),o._data.push(e[r]);return a},_groupData:function(e,t,r){var l,o=this,a=o._groupAggregatesDefaultObject||{},n=e.items,i=Fe({},a,e.aggregates),s=Fe({},{field:e.field,value:e.value,items:n,aggregates:i},e.aggregates[r?r.field:e.field]),d={};if(!t)for(l in i)d[l]=Fe({},i[l],{group:{field:e.field,value:e.value,items:n}});return Fe({},d,s)},_groupRowHtml:function(e,t,r,l,o,a,n){var i,s,d,c=this,u="",p=e.field,h=We(U(c.columns),function(e){return e.field==p})[0]||{},f=h.groupHeaderTemplate?h.groupHeaderTemplate:v(c.columns)[0].groupHeaderColumnTemplate,g=(h.title||p)+": "+le(e.value,h.format,h.values,h.encoded),m=e.items,b=c._groups(),k=o.groupFooterTemplate,_=o.groupHeaderColumnTemplate;if((o.groupFooterTemplate||o.groupHeaderColumnTemplate||h.groupHeaderTemplate)&&(d=c._groupData(e,!1,!(h.groupHeaderTemplate||!v(c.columns)[0].groupHeaderColumnTemplate)&&v(c.columns)[0])),f&&!a&&(g=typeof f===Ot?f(d):Se.template(f)(d)),c._skipRerenderItemsCount?l(t,r,g):u+=_?_(Fe({},d,{groupCells:r,colspan:b-r,text:g})):l(t,r,g),e.hasSubgroups)for(i=0,s=m.length;i<s;i++)u+=c._groupRowHtml(m[i],a?t:t-1,r+1,l,o,a,n&&i===m.length-1);else u+=c._rowsHtml(m,o);return k&&(n?Pe(e.value,c._skippedGroups)||c._skippedGroups.push(e.value):(c._skippedGroups.length&&c._skippedGroups[0]===e.value&&c._skippedGroups.shift(),c._skipRerenderItemsCount||(u+=k(d)))),u},collapseGroup:function(t){var r,l,o,a,n,i,s=this,d=t,c=this.options.groupable,u=c.showFooter,p=u?0:1,h=e();for(t=e(t),this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?h=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(h=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),r=t.find(".k-group-cell").length,t.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1).find("a").attr(ar,or),t=t.nextAll("tr"),i=[],o=0,a=t.length;o<a&&(n=t.eq(o),l=n.find(".k-group-cell").length,n.hasClass("k-grouping-row")?p++:n.hasClass("k-group-footer")&&p--,!(l<=r||n.hasClass("k-group-footer")&&p<0));o++)h.length&&i.push(h[o]),i.push(n[0]);e(i).hide(),this.options.scrollable.endless&&this.content&&setTimeout(function(){s.content.scroll(),s._groupToCollapse=d})},expandGroup:function(t){t=e(t);var r,l,o,a,n,i=this,s=i.options.groupable.showFooter,d=e(),c=[],u=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),r=t.find(".k-group-cell").length,t.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0).find("a").attr(ar,lr),t=t.nextAll("tr"),a=0,n=t.length;a<n&&(l=t.eq(a),o=l.find(".k-group-cell").length,!(o<=r));a++)o!=r+1||l.hasClass("k-detail-row")||(l.show(),d.eq(a).show(),l.hasClass("k-grouping-row")&&l.find(".k-icon").hasClass("k-i-collapse")&&i.expandGroup(l),l.hasClass("k-master-row")&&l.find(".k-icon").hasClass("k-i-collapse")&&(l.next().show(),d.eq(a+1).show())),l.hasClass("k-grouping-row")&&(s&&c.push(l.is(":visible")),u++),l.hasClass("k-group-footer")&&(s&&l.toggle(c.pop()),1==u?(l.show(),d.eq(a).show()):u--);0===r&&i.options.scrollable.endless&&this._isLocked()&&i._syncLockedContentHeight()},_updateHeader:function(t){var r=this,l=r._isLocked()?r.lockedHeader.find("thead"):r.thead,o=l.find("tr.k-filter-row").find("th.k-group-cell").length,a=l.find("tr:first").find("th.k-group-cell").length,n=l.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>a?(e(Array(t-a+1).join('<th class="k-group-cell k-header" scope="col">'+r.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(l.children("tr:not(.k-filter-row)")),r.element.is(":visible")&&n.find("th.k-group-cell").hide()):t<a&&l.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>o&&e(Array(t-o+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(l.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,r=this;
r._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",r.wrapper).add(r.thead.parent()).add(r.table),r._footerWidth=ce(t.eq(0)),t.width(r._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",r.wrapper).add(r.lockedHeader.find(">table")).add(r.lockedTable),t.width(ce(t.eq(0))))},hideColumn:function(r){var l,o,a,n,s,d,c,u,p,h,f,g=this,m=0,k=g.footer||g.wrapper.find(".k-grid-footer"),w=g.columns,C=g.lockedHeader?$(g.lockedHeader.find(">table>thead")).filter(b).length:0,y=We(U(g.columns),function(e){return e.groupHeaderColumnTemplate});if(r="number"==typeof r?w[r]:De(r)?We(F(w),function(e){return e===r})[0]:We(F(w),function(e){return e.field===r})[0],r&&_(r)){if(h=g._columnVisibilitySetter(r),r.columns&&r.columns.length){for(d=M(r,w),h(r,!1),oe(i(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+d.row+")>th"),d.cell,!1),a=0;a<r.columns.length;a++)this.hideColumn(r.columns[a]);return g.trigger(bt,{column:r}),t}if(p=Pe(r,v(U(w))),h(r,!1),g._setParentsVisibility(r,!1),g._templates(),g._updateCols(),g._updateLockedCols(),f=g.thead,c=p,g.lockedHeader&&C>p?f=g.lockedHeader.find(">table>thead"):c-=C,l=$(f).filter(b).eq(c),l[0].style.display="none",oe(i(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>th"),p,!1),k[0]&&(g._updateCols(k.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(k.find(">.k-grid-footer-locked>table")),oe(k.find(".k-footer-template>td"),p,!1)),g.lockedTable&&C>p?ae(g.lockedTable.find(">tbody>tr"),p):ae(g.tbody.children(),p-C),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight(),g._syncLockedFooterHeight();else{for(n=g.thead.prev().find("col"),a=0,u=n.length;a<u;a+=1){if(s=n[a].style.width,!s||s.indexOf("%")!=-1){m=0;break}m+=parseInt(s,10)}o=e(">.k-grid-header table:first,>.k-grid-footer table:first",g.wrapper).add(g.table),g._footerWidth=null,m&&(o.each(function(){this.style.width=m+"px"}),g._footerWidth=m),gr.msie&&8==gr.version&&(o.css("display","inline-table"),setTimeout(function(){o.css("display","table")},1))}g._updateFirstColumnClass(),y.length>0&&g._renderGroupRows(),g.trigger(bt,{column:r})}},_setParentsVisibility:function(t,r){var l,o,a,n,s,d=this,c=d.columns,p=[],h=d._columnVisibilitySetter(t),f=r?function(e){return v(e.columns).length&&e.hidden}:function(e){return!v(e.columns).length&&!e.hidden};if(u(t,c,p)&&p.length)for(l=p.length-1;l>=0;l--)o=p[l],a=I(o,c),n=i(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+a.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(a.cell),f(o)&&(h(o,r),n[0].style.display=r?"":"none"),n.filter("["+Se.attr("colspan")+"]").length&&(s=parseInt(n.attr(Se.attr("colspan")),10),n[0].colSpan=s-A(o.columns)||1)},showColumn:function(r){var l,o,a,n,s,d,c,u,p,h,f,g,m,b,k=this,v=k.columns,w=k.footer||k.wrapper.find(".k-grid-footer"),C=k.lockedHeader?$(k.lockedHeader.find(">table>thead")).length:0,y=We(U(k.columns),function(e){return e.groupHeaderColumnTemplate});if("number"==typeof r?(h=r,r=v[r]):De(r)?e.each(F(v),function(e,t){if(t===r)return r=t,h=e,!1}):e.each(F(v),function(e,t){if(t.field===r)return r=t,h=e,!1}),r&&!_(r)){if(m=k._columnVisibilitySetter(r),r.columns&&r.columns.length){for(c=I(r,v),f=F(k.options.columns)[h],m(r,!0),oe(i(e(">table>thead",k.lockedHeader),k.thead,">tr:eq("+c.row+")>th"),c.cell,!0),l=0;l<r.columns.length;l++)f.columns[l].hidden||this.showColumn(r.columns[l]);return k.trigger(kt,{column:r}),t}if(g=Pe(r,U(v)),m(r,!0),k._setParentsVisibility(r,!0),k._templates(),k._updateCols(),k._updateLockedCols(),b=k.thead,d=g,k.lockedHeader&&C>g?b=k.lockedHeader.find(">table>thead"):d-=C,a=$(b).eq(d),a[0].style.display="",oe(i(e(">table>thead",k.lockedHeader),k.thead,">tr.k-filter-row>th"),g,!0),w[0]&&(k._updateCols(w.find(">.k-grid-footer-wrap>table")),k._updateLockedCols(w.find(">.k-grid-footer-locked>table")),oe(w.find(".k-footer-template>td"),g,!0)),k.lockedTable&&C>g?se(k.lockedTable.find(">tbody>tr"),g):se(k.tbody.children(),g-C),k.lockedTable)k._updateTablesWidth(),k._applyLockedContainersWidth(),k._syncLockedContentHeight(),k._syncLockedHeaderHeight();else if(n=e(">.k-grid-header table:first,>.k-grid-footer table:first",k.wrapper).add(k.table),r.width){for(s=0,p=k.thead.prev().find("col"),l=0,o=p.length;l<o;l+=1){if(u=p[l].style.width,u.indexOf("%")>-1){s=0;break}s+=parseInt(u,10)}k._footerWidth=null,s&&(n.each(function(){this.style.width=s+"px"}),k._footerWidth=s)}else n.width("");k._updateFirstColumnClass(),y.length>0&&k._renderGroupRows(),k.trigger(kt,{column:r})}},_columnVisibilitySetter:function(e){var t=e||{};return C(t.media)?p:f},_progress:function(e){var t=this.element,r=this.options.scrollable&&this.options.scrollable.endless;this._editContainer&&"popup"===this._editMode()?t=this._editContainer:this.lockedContent||r?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),r&&e?Se.ui.progress(t,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:!0}):Se.ui.progress(t,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var t=Ie();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var r,l,o,a=this,n=a.dataSource.view(),i=a.options.navigatable,s=e(a.current()),d=!1,c=(a.dataSource.group()||[]).length,u=c+j(v(a.columns)).length;t&&"itemchange"===t.action&&(a.editable||a.options.scrollable.endless)||(t&&"remove"===t.action&&a.editable&&a.editable.options.model&&Pe(a.editable.options.model,t.items)>-1&&a.editable.options.model.unbind(mt,a._modelChangeHandler),t=t||{},a.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(t.action===Ht&&a._isVirtualEditable()&&(a._destroyEditable(),a._clearEditableState()),a._angularItems("cleanup"),a._endlessFetchInProgress||(i&&(a._isActiveInTable()||a._editContainer&&a._editContainer.data("kendoWindow"))&&(d=s.is("th"),r=d?s.index():Math.max(a.cellIndex(s),0)),a._destroyEditable()),a.options.scrollable&&a.options.scrollable.endless?(clearTimeout(a._progressTimeOut),a._progressTimeOut=setTimeout(function(){a._endlessFetchInProgress||a._progress(!1)},100)):a._progress(!1),a._hideResizeHandle(),a._data=[],a.columns.length||(a._autoColumns(a._firstDataItem(n[0],c)),u=c+a.columns.length),a._group=c>0||a._group,a._group&&(a._templates(),a._updateCols(),a._updateLockedCols(),a._updateHeader(c),a._group=c>0,a._groupRows=ne(n)),a.content&&(l=a.content.scrollLeft()),o=a._skipRerenderItemsCount,a._renderContent(n,u,c),a.options.scrollable&&a.options.scrollable.endless&&this.lockedContent&&(a._skipRerenderItemsCount=o),a._renderLockedContent(n,u,c),a._footer(),a._renderNoRecordsContent(),a._togglePagerVisibility(),a._setContentHeight(),a._setContentWidth(a.content&&l),a.lockedTable&&(a.options.scrollable.virtual?a.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):a.touchScroller?a.touchScroller.movable.trigger("change"):(a.wrapper.one("scroll",function(e){e.stopPropagation()}),a.content.trigger("scroll"))),a._endlessFetchInProgress||a._restoreCurrent(r,d),a.touchScroller&&a.touchScroller.contentResized(),a.selectable&&a.selectable.resetTouchEvents(),a._muteAngularRebind(function(){a._angularItems("compile")}),a._checkBoxSelection&&a._toggleHeaderCheckState(!1),a.options.persistSelection&&(a.selectable&&!Se.ui.Selectable.parseOptions(a.options.selectable).cell||a._checkBoxSelection)?a._restoreSelection():a._selectedIds={},a.trigger(vt)))},_restoreCurrent:function(r,l){var o,a,n;r===t||r<0||(this._removeCurrent(),l?this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(r)):(o=0,this._rowVirtualIndex?o=this.virtualScrollable.position(this._rowVirtualIndex):r=0,a=e(),this.lockedTable&&(a=this.lockedTable.find(">tbody>tr").eq(o)),a=a.add(this.tbody.children().eq(o)),n=a.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r),this._setCurrent(n)),this._current&&fe(this._current.closest("table")[0],!0))},_restoreSelection:function(){var e,t=this,r=t.items();e=We(r,function(e){var r=t.dataItem(e)[t.dataSource.options.schema.model.id];if(t._selectedIds[r])return e}),t.select(e)},_angularItems:function(e){Se.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"===e&&this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var r=this,l=r.tbody;r.lockedContent&&(l=r.lockedTable.find("tbody")),r._group&&r.angular(t,function(){return{elements:l.children(".k-grouping-row"),data:e.map(ne(r.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var r=this,l=r.tbody;r.lockedContent&&(l=r.element),r._group&&r.groupFooterTemplate&&r.angular(t,function(){return{elements:l.find(".k-group-footer"),data:e.map(ie(r.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,r){var l,o,a,n,i=this,s="",d=null!=i.lockedContent,c=null,u=i.options.scrollable,p={rowTemplate:i.rowTemplate,altRowTemplate:i.altRowTemplate,groupFooterTemplate:i.groupFooterTemplate,groupHeaderColumnTemplate:i.groupHeaderColumnTemplate};if(u&&u.endless&&!i.dataSource.options.endless&&(i._skipRerenderItemsCount=0,i.content&&(i.content[0].scrollTop=0)),c=i._skipRerenderItemsCount>0,t=d?t-j(K(i.columns)).length:t,r>0)for(t=d?t-r:t,i.detailTemplate&&t++,i.groupFooterTemplate&&(i._groupAggregatesDefaultObject=i.dataSource.aggregates()),i.options.scrollable.endless&&(n=i.dataSource.flatView().length),l=0,o=e.length;l<o;l++)i._skippedGroups||(i._skippedGroups=[]),a=n&&l===e.length-1&&n!==i.dataSource.total(),s+=i._groupRowHtml(e[l],t,0,d?ye:Ce,p,d,a);else s+=i._rowsHtml(e,p);c?(i.tbody.append(s),setTimeout(function(){i._groupToCollapse&&(i.collapseGroup(i._groupToCollapse),i._groupToCollapse=null)}),i._endlessFetchInProgress=null):i.tbody=Y(i.tbody,i.table,s,this.options.$angular)},_renderGroupRows:function(){var t,r,l,o,a,n,i,s,d,c,u,p,h,f,g,m,b,k=this,_=k._groupRows,w=k.wrapper.find(".k-grouping-row"),C=k._groups(),y=null!=k.lockedContent;w.each(function(w,S){f=e(S),c=f.closest("table").parent(),u=c.is("."+ot),r=j(u?v(N(k.columns)):v(O(k.columns))),g=f.find("."+at).length,y?(t=u?Ce:ye,l=u?r.length+C-g:r.length):(t=Ce,l=r.length+C-g),o=w>=_.length?_[w-_.length]:_[w],a=o.field,n=We(U(k.columns),function(e){return e.field==a})[0]||{},b=!(n.groupHeaderTemplate||!v(k.columns)[0].groupHeaderColumnTemplate)&&v(k.columns)[0],i=n.groupHeaderTemplate?n.groupHeaderTemplate:v(k.columns)[0].groupHeaderColumnTemplate,s=(n.title||a)+": "+le(o.value,n.format,n.values,n.encoded),C=C,d=k._groupData(o,!1,b),m=u?k.lockedGroupHeaderColumnTemplate:k.groupHeaderColumnTemplate,i&&(s=typeof i===Ot?i(d):Se.template(i)(d)),p=f.prev().length?f.prev():f.parent(),h=e(m?m(Fe({},d,{groupCells:g,colspan:C-g,text:s})):t(l,g,s)),p.is("tbody")?p.prepend(h):p.after(h),f.remove()})},_renderLockedContent:function(e,t,r){var l,o,a,n="",i=null,s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){if(a=this.lockedTable,i=this._skipRerenderItemsCount>0,r>0)for(t-=v(U(O(this.columns))).length,l=0,o=e.length;l<o;l++)n+=this._groupRowHtml(e[l],t,0,Ce,s,!1,this.options.scrollable.endless&&l===e.length-1);else n=this._rowsHtml(e,s);i?a.children("tbody").append(n):Y(a.children("tbody"),a,n,this.options.$angular),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){this.options.pageable.alwaysVisible===!1&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var r,l,o,a,n=e[0].rows,i=n.length,s=t[0].rows,d=e.add(t),c=d.length,u=[];for(r=0;r<i&&s[r];r++)n[r].style.height&&(n[r].style.height=s[r].style.height="");for(r=0;r<i&&s[r];r++)l=n[r].offsetHeight,o=s[r].offsetHeight,a=0,l>o?a=l:l<o&&(a=o),u.push(a);for(r=0;r<c;r++)d[r].style.display="none";for(r=0;r<i;r++)u[r]&&(n[r].style.height=s[r].style.height=u[r]+1+"px");for(r=0;r<c;r++)d[r].style.display=""}});Se.ExcelMixin&&Se.ExcelMixin.extend(wr.prototype),Se.PDFMixin&&(Se.PDFMixin.extend(wr.prototype),wr.prototype._drawPDF_autoPageBreak=function(r){function l(){u&&i!==t?(c.one("change",o),c.page(i)):(s.refresh(),o())}function o(){h.appendTo(document.body);var t=e.extend({},s.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});Se.drawing.drawDOM(f,t).always(function(){h.remove()}).then(function(e){d.resolve(e)}).fail(function(e){d.reject(e)})}function a(){var e=c.page(),t=u?c.totalPages():1;n.append(p.find("tr")),e<t?c.page(e+1):(c.unbind("change",a),l())}var n,i,s=this,d=new e.Deferred,c=s.dataSource,u=s.options.pdf.allPages,p=s.wrapper.find('table[role="grid"] > tbody'),h=e("<div>").css({position:"absolute",left:-1e4,top:-1e4}),f=s.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(h);return f.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),f.find('table[role="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"}),f.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),f.find(".k-grid-header, .k-grid-footer").css({paddingRight:0}),this._initPDFProgress(r),n=f.find('table[role="grid"] > tbody').empty(),i=c.page(),u?(c.bind("change",a),c.page(1)):a(),d.promise()},wr.prototype._drawPDF=function(r){function l(){i&&d!==t?(n.unbind("change",o),n.one("change",function(){a.resolve(s)}),n.page(d)):a.resolve(s)}function o(){c._drawPDFShadow({width:c.wrapper.width()},{avoidLinks:c.options.pdf.avoidLinks}).done(function(e){var t=n.page(),o=i?n.totalPages():1,a={page:e,pageNumber:t,progress:t/o,totalPages:o};r.notify(a),s.append(a.page),t<o?n.page(t+1):l()}).fail(function(e){a.reject(e)})}var a,n,i,s,d,c=this;return c.options.pdf.paperSize&&"auto"!=c.options.pdf.paperSize?c._drawPDF_autoPageBreak(r):(a=new e.Deferred,n=c.dataSource,i=c.options.pdf.allPages,this._initPDFProgress(r),s=new Se.drawing.Group,d=n.page(),i?(n.bind("change",o),n.page(1)):o(),a.promise())},wr.prototype._initPDFProgress=function(t){var r,l=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");l.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(l),r=e("<div class='k-loading-pdf-progress'>").appendTo(l).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){r.value(e.progress)}).always(function(){Se.destroy(l),l.remove()})}),Te.plugin(wr),Te.plugin(_r)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()});
//# sourceMappingURL=kendo.grid.min.js.map
